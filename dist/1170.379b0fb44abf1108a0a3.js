"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[1170],{68292:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(13439),a=n(29807),s=n(87357),r=n(37836),c=n(30857),l=n(39351),d=n(73767);let u=0;const h=(0,r.Fe)((()=>{u=0})),m=(0,o.ph)((({text:e,className:t,isDisabled:n,ref:r})=>{const{isRtl:m}=(0,l.A)(),p=(0,d.A)(e),f=(0,c.A)(),y=!(!(!n&&(0,a.PKK)((0,i.mS)())&&void 0!==p&&p!==e)||u>=10||(0===u&&h(),u++,0)),g=(0,o.Kr)((()=>y?function(e,t){const n=[],i=e.length,a=t?.length??0;for(let s=0;s<=i;s++){const r=i-s,c=a-s;t&&c>=0&&e[r]!==t[c]?n.unshift(o.Ay.createElement("div",{className:"IYTzbS8o"},o.Ay.createElement("div",{className:"Jw1oQFdk"},e[r]??""),o.Ay.createElement("div",{className:"TZfEz3sc"},t[c]),o.Ay.createElement("div",{className:"Y9ied8_t"},e[r]??""))):n.unshift(o.Ay.createElement("span",null,e[r]??""))}return n}(e,p):e),[y,p,e]);return(0,o.vJ)((()=>{if(!y)return;const e=window.setTimeout((()=>{f()}),200);return()=>{window.clearTimeout(e)}}),[y,e]),o.Ay.createElement("span",{ref:r,className:(0,s.A)(t,!n&&"tgKbsVmz"),dir:m?"rtl":void 0},g)}))},79577:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(23174),a=n(90709),s=n(62587),r=n(64489);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}const l=(0,o.ph)((function(e){const{sticker:t,noLoad:n,forcePreview:l,...d}=e,u=t?.thumbnail?.dataUri,h=t&&(0,a.Mw)(t,"full"),m=(0,s.A)(t?(0,a.Mw)(t,"preview"):void 0,n&&!l,i.qZ.BlobUrl),p=(0,s.A)(h,n);return o.Ay.createElement(r.A,c({tgsUrl:p,previewUrl:m,thumbDataUri:u},d))}))},64489:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(87357),a=n(95807),s=n(37661),r=n(17712),c=n(83057),l=n(4438);const d="lM2usrZU";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}const h=new Set,m=(0,o.ph)((function(e){const{previewUrl:t,thumbDataUri:n,className:m,...p}=e,[f,,y]=(0,s.A)(Boolean(n)),g=(0,c.A)(f),[v,A,C]=(0,s.A)(h.has(t)),S=(0,c.A)(v),[E,b]=(0,s.A)(!1),I=(0,r.A)((()=>{A(),h.add(t)})),w=(0,r.A)((()=>{y(),C(),setTimeout(b,300)})),{size:R}=e;return o.Ay.createElement("div",{className:(0,i.A)(m,"xCi2f0YH"),style:(0,a.A)(void 0!==R&&`width: ${R}px; height: ${R}px;`)},n&&!E&&o.Ay.createElement("img",{src:n,className:(0,i.A)(d,g),draggable:!1}),t&&!E&&o.Ay.createElement("img",{src:t,className:(0,i.A)(d,S),draggable:!1,onLoad:I}),o.Ay.createElement(l.A,u({},p,{onLoad:w})))}))},26875:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(84051),i=n(87357),a=n(59030),s=n(21849);const r=(0,o.ph)((({peers:e,size:t,className:n,limit:r=3,badgeText:c})=>{const l=(0,a.A)(),d="number"==typeof t?t:s.R[t],u=(0,o.Kr)((()=>c||(!e?.length||e.length<=r?void 0:"+"+(e.length-r))),[c,e,r]);return o.Ay.createElement("div",{className:(0,i.A)(n,"kXs18Nmi"),style:`--_size: ${d}px;`,dir:l.isRtl?"rtl":"ltr"},e?.slice(0,r).map((e=>o.Ay.createElement(s.A,{size:t,peer:e,className:"XND8fhC1"}))),u&&o.Ay.createElement("div",{className:"SHyAyGFO"},u))}))},81949:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(87357);const a=({children:e,className:t,onClick:n,onMouseDown:a})=>o.Ay.createElement("div",{className:(0,i.A)("hJUqHi4B",n&&"hjDEmFaT",t),onClick:n,onMouseDown:a},e)},27860:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(66644),a=n(87357),s=n(45470),r=n(17712),c=n(50680);const l=(0,o.ph)((({isVisible:e,withAnimation:t,thumbDataUri:n,className:l,width:d,height:u})=>{const h=(0,o.li)(null),{shouldRender:m,transitionClassNames:p}=(0,c.A)(e,void 0,!0,!t&&void 0,void 0,500),f=(0,s.A)(n,!m,void 0,25,d,u),y=(0,r.A)((e=>{if(!h.current)return;const t=h.current,n=e.currentTarget.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,s=o-n.width/2,r=a-n.height/2;(0,i.RK)((()=>{t.setAttribute("style",`--click-shift-x: ${s}px; --click-shift-y: ${r}px`)}))}));if(m)return o.Ay.createElement("div",{className:(0,a.A)("qF2WgYVg",p,l,t&&"pNM3cgkY"),ref:h,onClick:t?y:void 0},o.Ay.createElement("canvas",{ref:f,className:"eULqS2yR",width:d,height:u}),o.Ay.createElement("div",{className:"XBor45hE"}))}))},15535:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(31481),a=n(66644),s=n(96454),r=n(87357),c=n(83868),l=n(14737),d=n(43874),u=n(59030),h=n(64493),m=n(18276);const p=(0,o.ph)((({isLoading:e=!1,isPasswordVisible:t,error:n,hint:p,placeholder:f="Password",submitLabel:y="Next",description:g,shouldShowSubmit:v,shouldResetValue:A,shouldDisablePasswordManager:C=!1,noRipple:S=!1,clearError:E,onChangePasswordVisibility:b,onInputChange:I,onSubmit:w})=>{const R=(0,o.li)(null),P=(0,u.A)(),{isMobile:N}=(0,d.Ay)(),[T,x]=(0,o.J0)(""),[M,k]=(0,o.J0)(!1),L=N?550:400;return(0,o.vJ)((()=>{A&&x("")}),[A]),(0,l.A)((()=>{s.TF||R.current.focus()}),L),(0,o.vJ)((()=>{n&&(0,a.RK)((()=>{R.current.focus(),R.current.select()}))}),[n]),o.Ay.createElement("form",{action:"",onSubmit:w?function(t){t.preventDefault(),e||M&&w(T)}:c.A,autoComplete:"off"},o.Ay.createElement("div",{className:(0,r.A)("input-group password-input",T&&"touched",n&&"error"),dir:P.isRtl?"rtl":void 0},C&&o.Ay.createElement("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),o.Ay.createElement("input",{ref:R,className:"form-control",type:t?"text":"password",id:"sign-in-password",value:T||"",autoComplete:C?"one-time-code":"current-password",onChange:function(e){n&&E();const{target:t}=e;x(t.value),k(t.value.length>=i.AGC),I&&I(t.value)},maxLength:256,dir:"auto"}),o.Ay.createElement("label",null,n||p||f),o.Ay.createElement("div",{className:"div-button toggle-password",onClick:function(){b(!t)},role:"button",tabIndex:0,title:"Toggle password visibility","aria-label":"Toggle password visibility"},o.Ay.createElement(m.A,{name:t?"eye":"eye-crossed"}))),g&&o.Ay.createElement("p",{className:"description"},g),w&&(M||v)&&o.Ay.createElement(h.A,{size:"smaller",type:"submit",ripple:!S,isLoading:e,disabled:!M},y))}))},10187:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(13439),a=n(70636),s=n(29807),r=n(87357),c=n(35049),l=n(59030),d=n(21849),u=n(34431),h=n(18276);const m=(0,o.ph)((0,i.EK)(((e,{peerId:t,forceShowSelf:n})=>{if(!t)return{};const o=(0,s.PVB)(e,t),i=(0,s.mBe)(e,t);return{peer:o,isSavedMessages:!n&&i&&i.isSelf}}))((({icon:e,title:t,isMinimized:n,canClose:i,isCloseNonDestructive:s,clickArg:m,peer:p,mockPeer:f,customPeer:y,className:g,isSavedMessages:v,withPeerColors:A,withEmojiStatus:C,onClick:S,itemClassName:E})=>{const b=(0,l.A)(),I=f||p,w=y||I,R=I&&(0,a.vj)(I)?I:void 0;let P,N,T;e&&t?(P=o.Ay.createElement("div",{className:"NtoGLT22"},o.Ay.createElement(h.A,{name:e,style:"f91Ad80i"})),N=t):w&&(P=o.Ay.createElement(d.A,{className:"La8BQ9yr",peer:w,size:"small",isSavedMessages:v}),T=(0,a.F9)(b,w)||t,N=t||o.Ay.createElement(u.A,{peer:w,isSavedMessages:v,withEmojiStatus:C}));const x=(0,r.A)("_Lq6_4e5",(R?.isForum||y?.isAvatarSquare)&&"JIHfTUVn",n&&"UhOZvxvs",i&&"uvvgSFUJ",s&&"fAk5yEeV",!S&&"P8r3OoaX",A&&(0,c.y)(y||p),g);return o.Ay.createElement("div",{className:x,onClick:()=>S?.(m),title:n?T:void 0,dir:b.isRtl?"rtl":void 0},P,!n&&o.Ay.createElement("div",{className:(0,r.A)("XPVuH29G",E),dir:"auto"},N),i&&o.Ay.createElement("div",{className:"xVPG2UTy"},o.Ay.createElement(h.A,{name:"close"})))})))},20333:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(87357),a=n(95807),s=n(59030),r=n(93545),c=n(18276);const l="_b5HgBXr",d="P6mch4bB",u=(0,o.ph)((({leftText:e,rightText:t,floatingBadgeText:n,floatingBadgeIcon:u,progress:h,isPrimary:m,className:p})=>{const f=(0,s.A)(),y=(0,o.li)(null),g=(0,o.li)(null),[v,A]=(0,o.J0)(0),[C,S]=(0,o.J0)(0),E=()=>{if(y.current&&g.current&&void 0!==h){const e=y.current.offsetWidth,t=g.current.offsetWidth,n=e/2,o=t-e/2,i=h*t,a=Math.max(n,Math.min(i,o));let s;A(a/t),s=i<n?h*t/(2*n):i>o?.5+(h-o/t)/(1-o/t)*.4:.5,S(s)}};(0,o.vJ)(E,[h]),(0,r.A)(g,E);const b=Boolean(u||n),I=Boolean(h)&&h>.99;return o.Ay.createElement("div",{ref:g,className:(0,i.A)("nY2ggBsF",b&&"RYtVQAjM",m&&"Zi0w7QJ3",p),style:(0,a.A)(void 0!==h&&`--progress: ${h}`,void 0!==C&&`--tail-position: ${C}`,`--shift-x: ${v}`)},b&&o.Ay.createElement("div",{className:"dhigNjAq"},o.Ay.createElement("div",{className:"cOpfCGPh"},o.Ay.createElement("div",{className:"uNwBLNOy",ref:y},u&&o.Ay.createElement(c.A,{name:u,className:"MJ7MTmxi"}),n&&o.Ay.createElement("div",{className:"MwzZt3Qo",dir:f.isRtl?"rtl":void 0},n)),o.Ay.createElement("div",{className:"qRwO7SZm"},o.Ay.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},o.Ay.createElement("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"#7E85FF"}))))),o.Ay.createElement("div",{className:l},o.Ay.createElement("span",null,e)),o.Ay.createElement("div",{className:d},o.Ay.createElement("span",null,t)),o.Ay.createElement("div",{className:(0,i.A)("sZZV0yoe",I&&"m8ie8IxL")},o.Ay.createElement("div",{className:l},o.Ay.createElement("span",null,e)),o.Ay.createElement("div",{className:d},o.Ay.createElement("span",null,t))))}))},66833:(e,t,n)=>{function o(e){return"starGift"===e.type?e.sticker:e.attributes.find((e=>"model"===e.type))?.sticker}function i(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function a(e){if("starGiftUnique"===e.type)return function(e){const t=e.find((e=>"model"===e.type)),n=e.find((e=>"backdrop"===e.type)),o=e.find((e=>"pattern"===e.type));return{model:t,originalDetails:e.find((e=>"originalDetails"===e.type)),pattern:o,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>i,uc:()=>a,yQ:()=>o})},49086:(e,t,n)=>{n.d(t,{C:()=>h,V:()=>u});var o=n(13439),i=n(23174),a=n(90709),s=n(3544),r=n(60343),c=n(58849),l=n(4961),d=n(18501);function u({message:e,highlight:t,emojiSize:n,asPreview:o,truncateLength:i,isProtected:s,forcePlayback:l,shouldRenderAsHtml:u,isForMediaViewer:h,threadId:m,maxTimestamp:p}){const{text:f,entities:y}=e.content.text||{};if(!f){const t=(0,a.P5)(e)?.text;return t?[(0,c.A)(t,i)]:void 0}const g=(0,r.bj)(e);return(0,d.fd)({text:(0,c.A)(f,i),entities:y,highlight:t,emojiSize:n,shouldRenderAsHtml:u,containerId:`${h?"mv-":""}${g}`,asPreview:o,isProtected:s,forcePlayback:l,messageId:"id"in e?e.id:void 0,chatId:e.chatId,threadId:m,maxTimestamp:p})}function h(e,t,n=!1,r,d=s.vs){const{entities:h}=t.content.text||{},m=(0,o.mS)(),p=(0,a.ni)(m,t),f=h?.some((e=>e.type===i.C7.Spoiler)),y=h?.some((e=>e.type===i.C7.CustomEmoji));if(!f&&!y){const o=(0,c.A)((0,s.dS)(e,t,p,n),d);return r?(0,l.A)(o,["emoji","highlight"],{highlight:r}):(0,l.A)(o)}const g=!n&&(0,s.Su)(t),v=g?`${g} `:"",A=u({message:t,highlight:r,asPreview:!0,truncateLength:d}),C=(0,s.oL)(e,t,p,A);return[...(0,l.A)(v),...Array.isArray(C)?C:[C]].filter(Boolean)}},79582:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(13439),i=n(29807),a=n(87894);const s=3e9,r=3e8;function c(e,t=!1,n,c){const l=(0,o.mS)();return(0,a.My)(e,(e=>{if(e===c)return 1/0;const o=(0,i.hds)(l,e);if(!o)return 0;let a=0;const d=(0,i.yHC)(l,e);return d&&(a+=d.date),t&&o.isVerified&&(a+=s),n&&n.includes(e)&&(a=Date.now()+r+(n.length-n.indexOf(e))),a}),"desc")}},54960:(e,t,n)=>{n.d(t,{A:()=>N});var o=n(84051),i=n(13439),a=n(31481),s=n(66644),r=n(90709),c=n(70636),l=n(29807),d=n(87357),u=n(87894),h=n(79824),m=n(96374),p=n(17712),f=n(59030),y=n(19806),g=n(46222),v=n(40664),A=n(52745),C=n(24956),S=n(21849),E=n(34431),b=n(18276),I=n(10187),w=n(45780),R=n(31722);const P="PeerPickerItem",N=(0,o.ph)((({className:e,categories:t,itemIds:n,categoryPlaceholderKey:N,filterValue:T,filterPlaceholder:x,notFoundText:M,searchInputId:k,itemClassName:L,isLoading:O,noScrollRestore:D,isSearchable:B,lockedUnselectedSubtitle:F,forceShowSelf:U,isViewOnly:H,itemInputType:_,withStatus:j,withPeerTypes:K,withPeerUsernames:z,withDefaultPadding:q,onFilterChange:$,onDisabledClick:G,onLoadMore:J,...W})=>{const V=(0,f.A)(),Y=W.allowMultiple,X=Y?W.lockedSelectedIds:void 0,Z=Y?W.lockedUnselectedIds:void 0,Q=(0,o.Kr)((()=>Y?W.selectedCategories:W.selectedCategory?[W.selectedCategory]:h.p),[Y,W.selectedCategory,W.selectedCategories]),ee=(0,o.Kr)((()=>Y?W.selectedIds:W.selectedId?[W.selectedId]:h.p),[Y,W.selectedId,W.selectedIds]),te=(0,o.li)(null),ne=ee.length>10;(0,o.vJ)((()=>{if(!B)return;const e=window.setTimeout((()=>{(0,s.YS)((()=>{te.current?.focus()}))}),500);return()=>{window.clearTimeout(e)}}),[B]);const oe=(0,o.Kr)((()=>new Set(X)),[X]),ie=(0,o.Kr)((()=>new Set(Z)),[Z]),ae=(0,o.Kr)((()=>ee.filter((e=>!oe.has(e)))),[oe,ee]),se=(0,o.Kr)((()=>t?(0,u.dU)(t,"type"):{}),[t]),re=(0,o.Kr)((()=>{if(T)return n;const e=[],t=[],o=[];return n.forEach((n=>{oe.has(n)?e.push(n):ie.has(n)?o.push(n):t.push(n)})),e.concat(t,o)}),[T,n,oe,ie]),ce=(0,p.A)((e=>{if(oe.has(e))G?.(e,!0);else if(ie.has(e))G?.(e,!1);else{if(Y&&se[e]){const t=se[e].type,n=Q?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void W.onSelectedCategoriesChange?.(n)}if(Y){const t=ee.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void W.onSelectedIdsChange?.(t)}se[e]?W.onSelectedCategoryChange?.(se[e].type):W.onSelectedIdChange?.(e)}})),le=(0,p.A)((e=>{const{value:t}=e.currentTarget;$?.(t)})),[de,ue]=(0,m.A)(J,re,Boolean(T)),he=(0,o.hb)(((e,t)=>{const n=(0,i.mS)(),s=t?se[e]:void 0,u=t?void 0:(0,l.PVB)(n,e),h=u||s;if(!h)return a.Oig?o.Ay.createElement("div",{key:e},"No peer or category with ID ",e):void 0;const m=u&&!(0,c.vj)(u)?u.isSelf&&!U:void 0,p=ie.has(e),f=oe.has(e),g=p||f,v=s?Q?.includes(s.type):ee.includes(e),[A,I]=function(){if(p)return[F];if(u){if(z){const e=u.usernames?.[0]?.username;if(e)return[`@${e}`]}if(j){if((0,c.vj)(u))return[(0,r.sT)(V,u)];const e=(0,l.K0y)(n,u.id);return[(0,r.CD)(V,u,e),(0,d.A)((0,r.PF)(u,e,!0)&&R.A.onlineStatus)]}if(K){const e=(0,c.cy)(u);return e&&[V(e)]}}}()||[];return o.Ay.createElement(w.A,{key:e,className:(0,d.A)(P,L),title:o.Ay.createElement(E.A,{peer:h}),avatarElement:o.Ay.createElement(S.A,{peer:u||s,isSavedMessages:m,size:"medium"}),subtitle:A,subtitleClassName:I,disabled:g,inactive:H,ripple:!0,inputElement:g?o.Ay.createElement(b.A,{name:"lock-badge"}):"radio"===_?o.Ay.createElement(C.A,{checked:v,disabled:g,onlyInput:!0}):"checkbox"===_?o.Ay.createElement(y.A,{checked:v,disabled:g,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>ce(e),onDisabledClick:G&&(()=>G(e,f))})}),[se,U,H,L,_,V,oe,ie,F,G,Q,ee,K,j,z]),me=(0,o.Kr)((()=>{if(t?.length)return o.Ay.createElement("div",{key:"categories"},N&&o.Ay.createElement("div",{className:R.A.pickerCategoryTitle},V(N)),t?.map((e=>he(e.type,!0))),o.Ay.createElement("div",{className:R.A.pickerCategoryTitle},V("FilterChats")))}),[t,N,V,he]);return o.Ay.createElement("div",{className:(0,d.A)(R.A.container,e)},B&&o.Ay.createElement("div",{className:(0,d.A)(R.A.header,"custom-scroll"),dir:V.isRtl?"rtl":void 0},Q?.map((e=>o.Ay.createElement(I.A,{className:R.A.peerChip,customPeer:se[e],onClick:ce,clickArg:e,canClose:!0}))),X?.map(((e,t)=>o.Ay.createElement(I.A,{className:R.A.peerChip,peerId:e,isMinimized:ne&&t<ee.length-5,forceShowSelf:U,onClick:ce,clickArg:e}))),ae.map(((e,t)=>o.Ay.createElement(I.A,{className:R.A.peerChip,peerId:e,isMinimized:ne&&t+(X?.length||0)<ee.length-5,canClose:!0,onClick:ce,clickArg:e}))),o.Ay.createElement(v.A,{id:k,ref:te,value:T,onChange:le,placeholder:x||V("SelectChat")})),de?.length?o.Ay.createElement(g.A,{className:(0,d.A)(R.A.pickerList,q&&R.A.padded,"custom-scroll"),items:de,itemSelector:`.${P}`,beforeChildren:me,onLoadMore:ue,noScrollRestore:D},de.map((e=>he(e)))):O||!de||de.length?o.Ay.createElement(A.A,null):o.Ay.createElement("p",{className:R.A.noResults},M||"Sorry, nothing found."))}))},45780:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(96454),a=n(87357),s=n(17712),r=n(59030),c=n(42452);const l=({title:e,subtitle:t,avatarElement:n,inputElement:l,inputPosition:d="start",disabled:u,inactive:h,ripple:m,className:p,titleClassName:f,subtitleClassName:y,style:g,onClick:v,onDisabledClick:A})=>{const C=(0,r.A)(),S=!h&&!u,E=(0,s.A)((()=>{h||(u?A?.():v?.())}));return o.Ay.createElement("div",{className:(0,a.A)("OHkx_W75",t&&"neXqB2_A",u&&"tvZeVJPh",S&&"VUSwo4t5",n&&"dMT9byM6",p),onClick:E,style:g,dir:C.isRtl?"rtl":void 0,role:S?"button":void 0,tabIndex:S?0:void 0},!u&&!h&&m&&o.Ay.createElement(c.A,null),l&&o.Ay.createElement("div",{className:(0,a.A)("kmjqObdP","end"===d?"iqGhSQGm":"F0Hv3EQm")},l),n&&o.Ay.createElement("div",{className:"dnAaRPCo"},n),o.Ay.createElement("div",{className:(0,a.A)("JSSC0N8V",f)},e),t&&o.Ay.createElement("div",{className:(0,a.A)("OYmzCSp2",y)},t),!l&&i.pz&&o.Ay.createElement("div",{className:"P53DrbWA"}))}},40558:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(66644),a=n(90709),s=n(87357),r=n(95807),c=n(87679),l=n(17712),d=n(62587),u=n(93545),h=n(38691);const m=(0,o.ph)((({backgroundColors:e,patternColor:t,patternIcon:n,clearBottomSector:m,className:p})=>{const f=(0,o.li)(null),y=(0,o.li)(null),[g,v]=(0,o.Ul)({width:0,height:0}),A=(0,h.A)(),[C,S]=(0,o.J0)(),E=n&&(0,a.Mw)(n,"preview"),b=(0,d.A)(E);(0,o.vJ)((()=>{b&&(0,c.NN)(b).then(S)}),[b]);const I=(0,o.Kr)((()=>{const e=[];for(let t=1;t<=3;t++){const n=Math.floor(8*(1+.5*(t-1))),o=t/3,i=.05+(.4-.05)*o,a=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const s=t/n*Math.PI*2+a;if(m&&s>.45*Math.PI&&s<.55*Math.PI)continue;const r=.5+1.71*i*Math.cos(s),c=.5+i*Math.sin(s),l=1.4-o*Math.random();e.push({x:r,y:c,sizeFactor:l})}}return e}),[m]);(0,u.A)(f,(e=>{v({width:e.contentRect.width,height:e.contentRect.height})})),(0,o.vJ)((()=>{const e=f.current;e&&v({width:e.clientWidth,height:e.clientHeight})}),[v]);const w=(0,l.A)((()=>{const e=y.current;if(!e||!C)return;const n=e.getContext("2d"),{width:o,height:i}=e;if(!o||!i)return;n.save(),I.forEach((({x:e,y:t,sizeFactor:a})=>{const s=(o-Math.max(o,250*A))/2,r=e*Math.max(o,250*A)+s,c=t*Math.max(i,250*A)+s,l=20*A*a*(s?.8:1);n.drawImage(C,r-l/2,c-l/2,l,l)})),n.restore(),t&&(n.save(),n.fillStyle=t,n.globalCompositeOperation="source-atop",n.fillRect(0,0,o,i),n.restore());const a=n.createRadialGradient(o/2,i/2,0,o/2,i/2,o/2);a.addColorStop(0,"#FFFFFF77"),a.addColorStop(1,"#FFFFFF"),n.save(),n.globalCompositeOperation="destination-out",n.fillStyle=a,n.fillRect(0,0,o,i),n.restore()}));return(0,o.vJ)((()=>{w()}),[C]),(0,o.vJ)((()=>{const{width:e,height:t}=g(),n=y.current;if(!e||!t)return;const o=Math.max(e,t);(0,i.RK)((()=>{n.width=o*A,n.height=o*A,w()}))}),[g,A]),o.Ay.createElement("div",{ref:f,className:(0,s.A)("Af3tYFMg",p),style:(0,r.A)(`--_bg-1: ${e[0]}`,`--_bg-2: ${e[1]||e[0]}`)},o.Ay.createElement("canvas",{className:"GbpiDSS_",ref:y}))}))},83594:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(90709),a=n(96454),s=n(87357),r=n(95807),c=n(62587),l=n(87412);const d="PZAuNVZH",u=(0,o.ph)((({reaction:e,isLottie:t,className:n,particleSize:u,onEnded:h})=>{const m=(0,i.aL)(e.documentId,!0),p=(0,c.A)(t?void 0:m),f=(0,o.Kr)((()=>a.ol?Array.from({length:7}).map((()=>function(e=20){const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(u))):[]),[u]);if(p||t)return o.Ay.createElement("div",{className:(0,s.A)("aInga6VW",n),style:(0,r.A)(Boolean(u)&&`--particle-size: ${u}px`)},f.map(((n,i)=>{const a=`--offset-path: path('${n}');`;return t?o.Ay.createElement(l.A,{documentId:e.documentId,className:d,style:a,withSharedAnimation:!0,size:u,onAnimationEnd:0===i?h:void 0}):o.Ay.createElement("img",{src:p,alt:"",className:d,style:a,draggable:!1,onAnimationEnd:0===i?h:void 0})})))}))},11241:(e,t,n)=>{n.d(t,{A:()=>I});var o=n(84051),i=n(13439),a=n(90709),s=n(29807),r=n(87357),c=n(43336),l=n(76023),d=n(37661),u=n(5912),h=n(17712),m=n(62587),p=n(50680),f=n(47483),y=n(18104),g=n(87412),v=n(83594),A=n(17794),C=n(93879);const S=1.5*l.$,E=6.5*l.$,b=l.$,I=(0,o.ph)((0,i.EK)(((e,{containerId:t})=>{const{genericEmojiEffects:n,reactions:o}=e,{activeReactions:i}=(0,s.nTw)(e),a=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:i?.[t],availableReactions:o.availableReactions,genericEffects:n,withEffects:a}}))((({containerId:e,reaction:t,className:n,size:s=S,effectSize:l=E,activeReactions:I,availableReactions:w,genericEffects:R,withEffects:P,withEffectOnly:N,shouldPause:T,shouldLoop:x,loopLimit:M,observeIntersection:k})=>{const{stopActiveReaction:L}=(0,i.ko)(),O=(0,o.li)(null),D="custom"===t.type,B=(0,o.Kr)((()=>w?.find((e=>(0,a.a0)(e.reaction,t)))),[w,t]),F=B?.centerIcon?.id,{customEmoji:U}=(0,f.A)(D?t.documentId:void 0),H=(0,o.Kr)((()=>{if(!D)return B?.aroundAnimation?.id;if(!U)return;const e=w?.find((e=>e.reaction.emoticon===U.emoji))?.aroundAnimation?.id;return e}),[B,w,U,D]),_=(0,o.Kr)((()=>{if(H)return H;if(!R?.stickers)return;const{stickers:e}=R;return e[Math.floor(Math.random()*e.length)].id}),[H,R]),j=(0,u.Vz)(O,k),K=F&&(0,a.aL)(F),z=_&&(0,a.aL)(_),q=(0,m.A)(K),$=(0,m.A)(z),G=(0,o.Kr)((()=>I?.find((e=>(0,a.a0)(e,t)))),[I,t]),J=Boolean(P&&G&&(D||q)&&$),W=j&&(J&&!N||x),{shouldRender:V,transitionClassNames:Y}=(0,p.A)(J,void 0,!0,"slow"),{shouldRender:X,transitionClassNames:Z}=(0,p.A)(W,void 0,!0,"slow"),Q=(0,h.A)((()=>{L({containerId:e,reaction:t})})),[ee,te,ne]=(0,d.A)(),oe=!(D||W&&ee),{shouldRender:ie,transitionClassNames:ae}=(0,p.A)(oe,void 0,!0),se=(0,r.A)(C.A.root,V&&C.A.animating,N&&C.A.withEffectOnly,n);return o.Ay.createElement("div",{className:se,ref:O},!N&&ie&&o.Ay.createElement(A.A,{className:ae,reaction:t,availableReactions:w,size:s,observeIntersection:k}),!N&&D&&o.Ay.createElement(g.A,{documentId:t.documentId,className:C.A.customEmoji,size:s,noPlay:T,noVideoOnMobile:!0,loopLimit:M,observeIntersectionForPlaying:k,forceAlways:!0}),X&&!D&&o.Ay.createElement(y.A,{key:`${F}-${s}`,className:(0,r.A)(C.A.animatedIcon,Z),size:(0,c.Ki)(1.9*s),tgsUrl:q,play:j&&!T,noLoop:!x,onLoad:te,onEnded:ne,forceAlways:!0}),V&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(y.A,{key:`${_}-${l}`,className:(0,r.A)(C.A.effect,Y),size:l,tgsUrl:$,play:j,noLoop:!0,onEnded:Q,forceAlways:!0}),D&&!H&&j&&o.Ay.createElement(v.A,{reaction:t,className:Y,particleSize:Math.max(.5*s,b),onEnded:Q})))})))},17794:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(90709),a=n(87357),s=n(62587),r=n(83057),c=n(87412),l=n(18276),d=n(61911);const u=(0,o.ph)((({reaction:e,availableReactions:t,className:n,size:u,withIconHeart:h,observeIntersection:m})=>{const p=(0,o.Kr)((()=>t?.find((t=>(0,i.a0)(t.reaction,e)))),[t,e]),f=p?.staticIcon?.id,y=f?`document${f}`:void 0,g=(0,s.A)(y),v=(0,r.A)(g),A="emoji"===e.type&&"🦄"===e.emoticon,C=h&&"emoji"===e.type&&"❤"===e.emoticon;return"custom"===e.type?o.Ay.createElement(c.A,{documentId:e.documentId,className:(0,a.A)("ReactionStaticEmoji",n),size:u,observeIntersectionForPlaying:m}):C?o.Ay.createElement(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${u}px; width: ${u}px`}):o.Ay.createElement("img",{className:(0,a.A)("ReactionStaticEmoji",A&&"with-unicorn-fix",v,n),style:u?`width: ${u}px; height: ${u}px`:void 0,src:g||d,alt:p?.title,draggable:!1})}))},49418:(e,t,n)=>{n.d(t,{Q:()=>i,u:()=>o});const o=e=>"tagName"in e&&"BLOCKQUOTE"===e.tagName;class i{constructor(){var e,t,n,o;e=this,n=!1,(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t="wasEnter"))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}attachHandler(e){e.addEventListener("beforeinput",this.evHandler.bind(this))}evHandler(e){if("insertLineBreak"===e.inputType||"insertParagraph"===e.inputType){if(this.insertEnterInsideBlockquote(e),"insertParagraph"===e.inputType){const t=window.getSelection();if(t){let n=t.getRangeAt(0).endContainer;for(;n&&!o(n);)n=n.parentNode;n&&o(n)&&(e.preventDefault(),document.execCommand("insertLineBreak",!1))}}this.wasEnter=!0}else this.wasEnter=!1}insertEnterInsideBlockquote(e){const t=window.getSelection();if(t&&t.isCollapsed){const n=t.getRangeAt(0);let i=n.endContainer;const a=n.endContainer.textContent?.substring(n.endOffset);if(!this.wasEnter||"\n"!==a&&""!==a){if(0===n.endOffset){let n=!0;for(;i&&!o(i);){if(i.previousSibling){n=!1;break}i=i.parentNode}if(n&&i){t.removeAllRanges();const n=document.createRange();n.setStartBefore(i),n.setEndBefore(i);const o=document.createTextNode(" ");return n.insertNode(o),n.collapse(!0),t.addRange(n),e.preventDefault(),!0}}}else{let a=!0;for(;i&&!o(i);){if(i.nextSibling){if(""===i.nextSibling.textContent){i=i.nextSibling;continue}a=!1;break}i=i.parentNode}if(a&&i){n.endContainer.textContent&&(n.endContainer.textContent=n.endContainer.textContent?.substring(0,n.endOffset)),t.removeAllRanges();const o=document.createRange();o.setStartAfter(i),o.setEndAfter(i);const a=document.createTextNode(" ");return o.insertNode(a),o.collapse(!1),t.addRange(o),e.preventDefault(),!0}}}return!1}}},10762:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(84051),i=n(66644),a=n(87094);let s;const r=(0,o.ph)((({richInputCtx:e,className:t,placeholder:n,tabIndex:r,disableEdit:c,detached:l})=>{const d=(0,o.li)(null),u=(0,a.A)(d,void 0,l),h=e.editable;return(0,o.vJ)((()=>{if(!d.current||l)return()=>{};const t=e.editable,n=d.current;return t.isAttached()?s=()=>{t.attachTo(n)}:t.attachTo(n),()=>{t.detachFrom(n),s?.(),s=void 0}}),[d,e.editable,l]),(0,o.vJ)((()=>{d.current&&h.isAttached(d.current)&&(0,i.RK)((()=>{h.applyRootProperties({className:t,disableEdit:c,placeholder:n,tabIndex:r})}))}),[h,d,t,c,n,r]),(0,o.vJ)((()=>{d.current&&h.isAttached(d.current)&&(0,i.RK)((()=>{h.emojiRenderer.setCustomColor(u??"")}))}),[h,d,u]),o.Ay.createElement("div",{ref:d})}))},37636:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(84051),i=n(80089),a=n(80464);const s=e=>{const{isOpen:t}=e,n=(0,a.A)(i.ar.Extra,"TextFormatter",!t);return n?o.Ay.createElement(n,e):void 0}},45508:(e,t,n)=>{n.d(t,{Cl:()=>te,Vf:()=>ne,rq:()=>oe});var o=n(84051),i=n(17712),a=n(66644);const s="for-exec-command-fix",r=document.createElement("style");function c(e,t,n,o){e&&[].push(e),(0,a.RK)((()=>{t&&(window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(t)),e?.classList.add("for-exec-command-fix"),document.execCommand("styleWithCss",!1,"false"),document.execCommand(n,!1,o),e?.classList.remove("for-exec-command-fix")}))}document.head.appendChild(r),r.innerHTML=`\n.${s} * {\n  display: inline  !important; // Required for insertHTML to work properly\n}\n\n.${s} b {\n  font-weight: bold !important; // Required for "bold" command to unbold\n}\n`;var l=n(58734),d=n(21013),u=n(22237),h=n(23174),m=n(31481);const p=/id="docs-internal-guid/i,f={BOLD:"700",ITALIC:"italic",UNDERLINE:"underline",STRIKETHROUGH:"line-through",SUPERSCRIPT:"super",SUBSCRIPT:"sub"},y={ANCHOR:"a",BOLD:"strong",ITALIC:"em",UNDERLINE:"u",BLOCKQUOTE:"blockquote",STRIKETHROUGH:"del",SUPERSCRIPT:"sup",SUBSCRIPT:"sub"},g=["H1","H2","H3","H4","H5","H6"];function v(e){return(new DOMParser).parseFromString(e,"text/html").body}function A(e,t){const n=document.createElement(y.ANCHOR);return n.href=t,n.appendChild(e.cloneNode(!0)),n}function C(e,t){const n=document.createElement(t);return n.appendChild(e.cloneNode(!0)),n}function S(e,t){let n=t.cloneNode(!0);return e?(e.style&&e.style.fontWeight===f.BOLD&&(n=C(n,y.BOLD)),e.style&&e.style.fontStyle===f.ITALIC&&(n=C(n,y.ITALIC)),e.style&&e.style.textDecoration===f.UNDERLINE&&(n=C(n,y.UNDERLINE)),e.style&&e.style.textDecoration===f.STRIKETHROUGH&&(n=C(n,y.STRIKETHROUGH)),e.style&&e.style.verticalAlign===f.SUPERSCRIPT&&(n=C(n,y.SUPERSCRIPT)),e.style&&e.style.verticalAlign===f.SUBSCRIPT&&(n=C(n,y.SUBSCRIPT)),n):n}function E(e){const t=e.cloneNode(!0);let n=document.createTextNode(t.textContent||""),o=t;return"A"===t.nodeName&&(n=A(n,t.href),"style"in t.childNodes[0]&&Boolean(t.childNodes[0].style)&&(o=t.childNodes[0])),n=S(o,n),n}function b(e){if(e.childNodes&&(e.childNodes.length<=1||"OL"===e.nodeName||"UL"===e.nodeName)){let t,n=document.createTextNode(e.textContent||"");if("UL"===e.nodeName||"OL"===e.nodeName||"LI"===e.nodeName){t=document.createElement(e.nodeName),n=document.createDocumentFragment();const o=[];for(let t=0;t<e.childNodes.length;t++)o.push(...b(e.childNodes[t]));o.map((e=>n.appendChild(e)))}else-1!==g.indexOf(e.nodeName)?(t=document.createElement(e.nodeName),n=E(e.childNodes[0])):"P"===e.nodeName?(t=document.createElement("p"),n=function(e){const t=e.cloneNode(!0);let n=document.createTextNode(t.textContent||""),o=document.createTextNode("");return"style"in t.childNodes[0]&&Boolean(t.childNodes[0].style)&&(o=t.childNodes[0]),t.childNodes[0]&&"A"===t.childNodes[0].nodeName&&(n=A(n.cloneNode(!0),t.childNodes[0].href),o=t.childNodes[0].childNodes[0]),n=S(o,n),n}(e)):"BR"===e.nodeName?n=e:(t=document.createElement("span"),n=E(e));return t?(t.appendChild(n),[t]):[e.cloneNode(!0)]}if(e.childNodes){const t=[];for(let n=0;n<e.childNodes.length;n++)t.push(...b(e.childNodes[n]));return t}return[e]}function I(e){return 8!==e.nodeType}const w=/<style>(.*?)<\/style>/gs;var R=n(18501),P=n(49362),N=n(49418),T=n(13439),x=n(88458),M=n(29807),k=n(41733);function L(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O{constructor(e,t,n){this.container=t,this.options=n,L(this,"video",void 0),L(this,"isPlaying",!1),this.video=document.createElement("video"),this.video.src=e,this.video.disablePictureInPicture=!0,this.video.muted=!0,n.style&&this.video.setAttribute("style",n.style),this.video.style.position="absolute",this.video.load(),this.options.noLoop||(this.video.loop=!0),(0,a.RK)((()=>{this.container.appendChild(this.video),this.recalculatePositionAndSize()}))}play(){!this.isPlaying&&this.video&&(this.recalculatePositionAndSize(),this.video.paused&&(0,k.A)(this.video),this.isPlaying=!0)}pause(){this.isPlaying&&this.video&&(this.video.paused||this.video.pause(),this.isPlaying=!1)}destroy(){this.pause(),this.video?.remove(),this.video=void 0}updatePosition(e){this.options.position=e,this.recalculatePositionAndSize()}recalculatePositionAndSize(){const{size:e,position:{x:t,y:n}}=this.options;(0,a.YS)((()=>{if(!this.video)return;const o=this.video,{width:i,height:s}=this.container.getBoundingClientRect();(0,a.RK)((()=>{o.style.left=`${Math.round(t*i)}px`,o.style.top=`${Math.round(n*s)}px`,o.style.width=`${e}px`,o.style.height=`${e}px`}))}))}}var D=n(60261),B=n(43336),F=n(71322),U=n(76023),H=n(37479),_=n(61157),j=n(38691);function K(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z=1.25*U.$;let q=0;class ${constructor(e){let t;K(this,"editable",void 0),K(this,"prefixId",void 0),K(this,"playersById",void 0),K(this,"customColor",void 0),K(this,"customColorFilter",void 0),K(this,"sharedCanvas",void 0),K(this,"sharedCanvasHq",void 0),K(this,"absoluteContainer",void 0),K(this,"resizeObserver",void 0),K(this,"detachCbs",void 0),K(this,"canPlayAnimatedEmojis",void 0),this.editable=e,this.playersById=new Map,this.prefixId=`EditableEmojiRender_${q++}_`,this.customColor="",this.customColorFilter="",this.sharedCanvas=document.createElement("canvas"),this.sharedCanvas.className="shared-canvas",this.sharedCanvasHq=document.createElement("canvas"),this.sharedCanvasHq.className="shared-canvas",this.absoluteContainer=document.createElement("div"),this.absoluteContainer.className="shared-canvas",this.canPlayAnimatedEmojis=!0,this.detachCbs=[],this.resizeObserver=new ResizeObserver((()=>{void 0===t&&(t=setTimeout((()=>{this.synchronizeElements()}),300))}))}setCustomColor(e){this.customColor!==e&&(this.customColor&&(0,H.c_)(this.customColor),this.customColor=e,e&&(this.customColorFilter=(0,H.dc)(e),this.synchronizeElements(),document.documentElement.style.setProperty("--input-custom-emoji-filter",this.customColorFilter||"none")))}clearPlayers(e){e.forEach((e=>{const t=this.playersById.get(e);t&&(t.destroy(),this.playersById.delete(e))}))}synchronizeElements(){const e=(0,T.mS)(),t=new Set(this.playersById.keys());Array.from(this.editable.root.querySelectorAll(".custom-emoji")).forEach((n=>{if(!n.dataset.uniqueId)return;const o=`${this.prefixId}${n.dataset.uniqueId}${this.customColor||""}`,i=n.dataset.documentId;t.delete(o);const a=(0,D.ZR)(i);if(!a)return;const s=this.sharedCanvas.getBoundingClientRect(),r=n.getBoundingClientRect(),c=(0,B.LI)((r.left-s.left)/s.width,4),l=(0,B.LI)((r.top-s.top)/s.height,4);if(this.playersById.has(o))return void this.playersById.get(o).updatePosition(c,l);const d=e.customEmojis.byId[i];if(!d)return;const u=d?.stickerSetInfo&&(0,M.CzR)(e,d.stickerSetInfo),h=[this.prefixId,i,this.customColor,window.devicePixelRatio].filter(Boolean).join("_");(async function({customEmoji:e,sharedCanvas:t,sharedCanvasHq:n,absoluteContainer:o,renderId:i,viewId:a,mediaUrl:s,position:r,isHq:c,textColor:l,colorFilter:d}){if(e.isLottie){const o=e.shouldUseTextColor&&l?(0,F.E2)(l):void 0,d=(await(0,x.Y)()).init(s,c?n:t,i,{size:z,coords:r,isLowPriority:!c},a,o?[o.r,o.g,o.b]:void 0);return{play:()=>d.play(),pause:()=>d.pause(),destroy:()=>d.removeView(a),updatePosition:(e,t)=>d.setSharedCanvasCoords(a,{x:e,y:t})}}if(e.isVideo){const t=e.shouldUseTextColor&&d?`filter: ${d};`:void 0,n=new O(s,o,{size:z,position:r,style:t});return{play:()=>n.play(),pause:()=>n.pause(),destroy:()=>n.destroy(),updatePosition:(e,t)=>n.updatePosition({x:e,y:t})}}throw new Error("Unsupported custom emoji type")})({customEmoji:d,sharedCanvas:this.sharedCanvas,sharedCanvasHq:this.sharedCanvasHq,absoluteContainer:this.absoluteContainer,renderId:h,viewId:o,mediaUrl:a,isHq:u,position:{x:c,y:l},textColor:this.customColor,colorFilter:this.customColorFilter}).then((e=>{this.canPlayAnimatedEmojis&&e.play(),this.playersById.set(o,e)}))})),this.clearPlayers(Array.from(t))}attachTo(e){e.appendChild(this.sharedCanvas),e.appendChild(this.sharedCanvasHq),e.appendChild(this.absoluteContainer),this.resizeObserver.observe(this.sharedCanvas),this.detachCbs.push((()=>this.resizeObserver.unobserve(this.sharedCanvas)));const t=(0,j.l)((()=>{this.synchronizeElements()}));this.detachCbs.push(t);const n=(0,_.rq)((()=>this.freezeAnimation()),(()=>(0,a.RK)((()=>this.unfreezeAnimation()))));this.detachCbs.push(n),this.synchronizeElements()}detachFrom(e){for(;this.detachCbs.length;){const e=this.detachCbs.pop();e&&e()}this.clearPlayers(Array.from(this.playersById.keys())),this.resizeObserver.unobserve(this.sharedCanvas),e.removeChild(this.sharedCanvas),e.removeChild(this.sharedCanvasHq),e.removeChild(this.absoluteContainer)}freezeAnimation(){this.playersById.forEach((e=>{e.pause()}))}unfreezeAnimation(){this.canPlayAnimatedEmojis&&this.playersById.forEach((e=>{e.play()}))}}var G=n(61433);const J="zyT59U5_",W="i7nYiF_y";function V(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Y{constructor(e){V(this,"root",void 0),V(this,"editable",void 0),V(this,"hiddenOnPreview",void 0),V(this,"isPreviewing",void 0),V(this,"setIsPreviewing",void 0),V(this,"delayedTimeout",-1),this.editable=e,this.root=document.createElement("div"),this.root.classList.add("yanzeI95"),this.root.classList.add(J),this.hiddenOnPreview=[this.editable.root,this.editable.emojiRenderer.sharedCanvas,this.editable.emojiRenderer.sharedCanvasHq,this.editable.emojiRenderer.absoluteContainer],[this.isPreviewing,this.setIsPreviewing]=(0,u.n5)(!1),this.editable.root.addEventListener("focus",(()=>{this.endPreview()})),this.editable.root.addEventListener("blur",(()=>{this.delayedPreview(20)}))}addHiddenOnPreview(...e){this.hiddenOnPreview.push(...e)}refreshPreview(){if(!this.isPreviewing())return;const e=this.editable.getFormattedText();G.Ay.render(o.Ay.createElement(o.Ay.Fragment,null,(0,R.fd)({...e})),this.root)}startPreview(){window.clearTimeout(this.delayedTimeout),this.delayedTimeout=-1,this.isPreviewing()||(this.setIsPreviewing(!0),this.refreshPreview(),(0,a.RK)((()=>{for(const e of this.hiddenOnPreview)e.classList.add(J);this.root.classList.remove(J)})))}delayedPreview(e=20){-1===this.delayedTimeout&&(this.delayedTimeout=window.setTimeout((()=>{this.startPreview()}),e))}endPreview(){window.clearTimeout(this.delayedTimeout),this.delayedTimeout=-1,this.isPreviewing()&&(this.setIsPreviewing(!1),(0,a.RK)((()=>{for(const e of this.hiddenOnPreview)e.classList.remove(J);this.root.classList.remove(J),G.Ay.render(void 0,this.root)})))}}function X(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z=/\s/,Q=document.createElement("div");class ee{constructor(){X(this,"root",void 0),X(this,"htmlS",void 0),X(this,"htmlSet",void 0),X(this,"emptyS",void 0),X(this,"emptySet",void 0),X(this,"matchableS",void 0),X(this,"matchableSet",void 0),X(this,"selectionS",void 0),X(this,"selectionSet",void 0),X(this,"attached",void 0),X(this,"disableEdit",void 0),X(this,"keyboardHandlers",void 0),X(this,"selectionListener",void 0),X(this,"pasteHandlers",void 0),X(this,"pasteListener",void 0),X(this,"emojiRenderer",void 0),X(this,"blockquoteEnter",void 0),X(this,"preview",void 0),this.root=document.createElement("div"),this.root.classList.add(W),this.attached=void 0,this.disableEdit=!1,this.updateRootProps(),[this.htmlS,this.htmlSet]=(0,u.n5)(""),[this.emptyS,this.emptySet]=(0,u.n5)(!0),[this.matchableS,this.matchableSet]=(0,u.n5)(void 0),[this.selectionS,this.selectionSet]=(0,u.n5)(void 0),this.keyboardHandlers=[],this.pasteHandlers=[],this.selectionListener=()=>this.handleSelectionUpdate(),this.pasteListener=e=>this.handlePaste(e),this.root.addEventListener("click",(()=>{this.focus()})),this.root.addEventListener("input",(()=>{this.handleContentUpdate()})),this.root.addEventListener("keydown",(e=>{for(const t of this.keyboardHandlers)if(t.onKeydown(e))break;this.handleSelectionUpdate()})),this.emojiRenderer=new $(this),this.blockquoteEnter=new N.Q,this.blockquoteEnter.attachHandler(this.root),this.preview=new Y(this)}updateRootProps(){this.disableEdit?this.root.contentEditable="false":this.root.contentEditable="true",this.root.role="textbox",this.root.dir="auto"}attachTo(e){if(this.attached)throw new Error("Tried to attach when already attached");this.attached=e,e.appendChild(this.root),document.addEventListener("selectionchange",this.selectionListener),document.addEventListener("paste",this.pasteListener),this.emojiRenderer.attachTo(e),e.appendChild(this.preview.root),e.classList.add("IkpAxpaa"),this.handleContentUpdate()}detachFrom(e){this.attached?(this.emojiRenderer.detachFrom(e),document.removeEventListener("selectionchange",this.selectionListener),document.removeEventListener("paste",this.pasteListener),e.removeChild(this.root),this.attached=void 0):console.warn("Tried to detach when not attached")}isAttached(e){return e?this.attached===e:void 0!==this.attached}applyRootProperties(e){e.className&&(this.root.className=e.className,this.root.classList.add(W)),e.placeholder&&this.root.setAttribute("aria-label",e.placeholder),void 0!==e.tabIndex&&(this.root.tabIndex=e.tabIndex),void 0!==e.disableEdit&&(this.disableEdit=e.disableEdit),this.updateRootProps()}focus(e,t){(0,l.A)(this.root,e,t)}blur(){this.root.blur()}isRangeInside(e){let t=e.commonAncestorContainer,n=1;for(;t&&t!==this.root&&n<10;)t=t.parentElement??void 0,n++;return t===this.root}ensureSelectionInside(){const e=window.getSelection();if(!e)return;if(e.rangeCount>0){const t=e.getRangeAt(0);if(this.isRangeInside(t))return}const t=document.createRange();t.selectNodeContents(this.root),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}calculateMatchable(e,t){if(!e.isCollapsed)return;let n=t.endContainer,o=t.endOffset,i=t.endOffset;if(n.nodeType!==document.TEXT_NODE&&n.childNodes[o-1]?.nodeType===document.TEXT_NODE&&(n=n.childNodes[o-1],o=n.textContent?.length||0,i=o),n.nodeType!==document.TEXT_NODE){if(n.nodeType===document.ELEMENT_NODE){const e=n;if("IMG"===e.tagName)return`IMG_ALT__${e.getAttribute("alt")}`}return}i--,o--;const a=n.textContent;if(a){for(;i>0&&!Z.test(a[i]);)i-=1;return a.slice(i,o+1)}}handleSelectionUpdate(){const e=window.getSelection(),t=!e||0===e.rangeCount,n=t?void 0:e?.getRangeAt(0);if(t||!n||!this.isRangeInside(n))return this.matchableSet(void 0),void this.selectionSet(void 0);this.matchableSet(this.calculateMatchable(e,n)),this.selectionSet({collapsed:e.isCollapsed,range:n})}handleContentUpdate(){if(!this.attached)return;const e=this.emptyS();this.htmlSet(this.root.innerHTML),this.emptySet(""===this.root.innerHTML||"<br>"===this.root.innerHTML),this.handleSelectionUpdate(),this.preview.refreshPreview(),!e&&this.emptyS()&&this.selectionS()?.collapsed&&c(this.root,this.selectionS()?.range,"removeFormat"),(0,a.YS)((()=>{this.emojiRenderer.synchronizeElements()}))}clearInput(){this.root.innerHTML="",this.handleContentUpdate()}setFormattedText(e){if(!e)return this.clearInput(),"";const t=(0,R.QY)(e);this.root.innerHTML=t,this.handleContentUpdate();const n=window.getSelection();if(n&&this.root.lastChild){const e=document.createRange();e.setEndAfter(this.root.lastChild),e.setStartAfter(this.root.lastChild),n.removeAllRanges(),n.addRange(e)}return t}getFormattedText(e=!0){return(0,d.Ay)(this.htmlS(),!1,!e)}addKeyboardHandler(e){return this.keyboardHandlers.push(e),this.keyboardHandlers=this.keyboardHandlers.sort(((e,t)=>t.priority-e.priority)),()=>this.keyboardHandlers.filter((t=>t!==e))}addPasteHandler(e){return this.pasteHandlers.push(e),()=>this.pasteHandlers.filter((t=>t!==e))}execCommand(e,t){this.ensureSelectionInside(),c(this.root,this.selectionS()?.range??void 0,e,t),this.handleContentUpdate()}insertMatchableHtml(e,t){const n=window.getSelection();if(!n||!n.rangeCount)return;const o=n.getRangeAt(0);let i=o.endContainer,a=o.endOffset,s=o.endOffset;if(i.nodeType!==document.TEXT_NODE&&i.childNodes[a-1]?.nodeType===document.TEXT_NODE&&(i=i.childNodes[a-1],a=i.textContent?.length||0,s=a),o.startContainer.nodeType===document.TEXT_NODE){const e=i.textContent;if(!e)return;for(;s>0&&!t(e[s]);)s--}else o.startContainer.nodeType===document.ELEMENT_NODE&&s>0&&s--;o.setStart(i,s),o.setEnd(i,a),n.removeAllRanges(),n.addRange(o),this.execCommand("insertHTML",e)}removeLastSymbol(){this.execCommand("delete")}insertFormattedText(e){const t=(0,R.QY)(e);this.execCommand("insertHTML",t)}handlePaste(e){if(!e.clipboardData)return;let t=e.target;for(;t&&t!==this.root;)t=t.parentElement??void 0;if(t!==this.root)return;if(e.preventDefault(),document.activeElement!==this.root)return;const n=e.clipboardData.getData("text"),o=e.clipboardData.getData("text/html"),i={editable:this,text:{text:n},html:o,items:e.clipboardData.items};o&&(i.text=(0,d.Ay)(function(e){let t=document.createElement("div");try{e=(n=e).match(p)?function(e){const t=document.createElement("body"),n=e.childNodes,o=Array.from(n).filter(I),i=[];for(const e of o)i.push(...b(e));for(let e=0;e<i.length;e++)t.appendChild(i[e].cloneNode(!0));return t}(v(n.replace(/(\r\n|\n|\r)/,""))).innerHTML:v(n.replace(/(\r\n|\n|\r)/,"")).innerHTML}catch(e){m.Oig&&console.error(e)}var n;t.innerHTML=e.replace(/\u00a0/g," ").replace(w,"");const o=t.querySelectorAll(".text-content");return o.length&&(t=o[o.length-1]),Array.from(t.getElementsByTagName("*")).forEach((e=>{if(e instanceof HTMLElement)switch(e.removeAttribute("style"),"BR"===e.tagName&&e.replaceWith("\n"),"P"===e.tagName&&e.appendChild(document.createTextNode("\n")),"IMG"!==e.tagName||e.dataset.entityType||e.replaceWith(e.getAttribute("alt")||""),e.dataset.ignoreOnPaste&&e.remove(),d.qh[e.tagName]&&e.setAttribute("data-entity-type",d.qh[e.tagName]),e.dataset.entityType||e.textContent!==e.innerText||e.replaceWith(e.textContent),e.dataset.alt&&e.setAttribute("alt",e.dataset.alt),e.dataset.entityType){case h.C7.MentionName:e.replaceWith(e.textContent||"");break;case h.C7.CustomEmoji:e.textContent=e.dataset.alt||""}else e.remove()})),t.innerHTML.trimEnd()}(o),!1,!0),i.text.entities?.length||(i.text={text:n}));for(const e of this.pasteHandlers)e(i);this.insertFormattedText(i.text)}setSelRange(e){const t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e),this.handleSelectionUpdate())}getSelectedHtml(e={}){const t=this.selectionS();if(!t)return;const{shouldDropCustomEmoji:n,shouldDropQuotes:o}={...e,shouldDropCustomEmoji:!1,shouldDropQuotes:!0},i=t.range.cloneRange();for(;i.commonAncestorContainer!==this.root;){const e=document.createRange();if(e.selectNodeContents(i.commonAncestorContainer),0!==e.compareBoundaryPoints(Range.START_TO_START,i))break;if(0!==e.compareBoundaryPoints(Range.END_TO_END,i))break;i.selectNode(i.commonAncestorContainer)}if(Q.replaceChildren(i.cloneContents()),n&&Q.querySelectorAll(P._p).forEach((e=>{e.replaceWith(e.getAttribute("alt"))})),o){let e=Q.querySelector("blockquote");for(;e;)e.replaceWith(...e.childNodes),e=Q.querySelector("blockquote")}return Q.innerHTML}}function te(){const e=(0,o.li)(void 0);e.current||(e.current=new ee);const t={getHtml:e.current.htmlS,editable:e.current};return{...t,ctx:t}}function ne(e,t,n=!0){const a=(0,i.A)(t.onKeydown),{priority:s}=t;(0,o.vJ)((()=>n?e.editable.addKeyboardHandler({priority:s,onKeydown:a}):()=>{}),[e.editable,a,s,n])}function oe(e,t,n=!0){const a=(0,i.A)(t);(0,o.vJ)((()=>n?e.editable.addPasteHandler(a):()=>{}),[e.editable,a,n])}},99515:(e,t,n)=>{n.d(t,{A:()=>V});var o=n(84051),i=n(13439),a=n(23174),s=n(31481),r=n(90709),c=n(29807),l=n(87357),d=n(85982),u=n(21013);const h=document.createElement("div"),m=new Set([a.C7.Bold,a.C7.Italic,a.C7.Underline,a.C7.Strike,a.C7.Spoiler,a.C7.CustomEmoji]);function p(e){const t=function(e){const t=e.cloneContents();h.appendChild(t);const n=function(e,t){const n=e.commonAncestorContainer;if(n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("text-content"))return t;let o=e.commonAncestorContainer.parentElement;for(;o&&!o.classList.contains("text-content");){const e=o.tagName.toLowerCase(),n=o.dataset.entityType;t=`<${e} ${n?`data-entity-type="${n}"`:""}>${t}</${e}>`,o=o.parentElement}return t}(e,h.innerHTML);return h.innerHTML="",n.replace(/<br\s*\/?>/gi,"\n").replace(/&nbsp;/gi," ").replace(/\u00a0/gi," ")}(e);return function(e){if(!e.entities)return e;const t=e.entities.filter((e=>m.has(e.type)));return{...e,entities:t.length?t:void 0}}((0,u.Ay)(t,!1,!0))}var f=n(37661),y=n(17712),g=n(59030),v=n(24531),A=n(21511),C=n(80089),S=n(80464);const E=e=>{const{isOpen:t}=e,n=(0,S.A)(C.ar.Extra,"PinMessageModal",!t);return n?o.Ay.createElement(n,e):void 0};var b=n(94189),I=n(73104),w=n(76023),R=n(4961),P=n(3544),N=n(96454),T=n(81686),x=n(31381),M=n(49086);function k(e){return e?"lng_context_copy_selected":"lng_context_copy_text"}var L=n(43874),O=n(26875),D=n(71429),B=n(24433),F=n(60859),U=n(55158),H=n(17663);const _="C3LVl_JT",j="cd1ZZeSy",K=(0,o.ph)((function({message:e}){const t=(0,g.A)(),{editDate:n}=e,i=!n;return o.Ay.createElement(B.A,{icon:"clock-edit",className:_},i?o.Ay.createElement(U.A,{className:j}):Boolean(n)&&t("Chat.PrivateMessageEditTimestamp.Date",(0,H.U)(t,1e3*n)))}));var z=n(76283),q=n(41036);const $=(0,o.ph)((function({message:e,shouldRenderShowWhen:t,canLoadReadDate:n,closeContextMenu:a}){const{openPrivacySettingsNoticeModal:s}=(0,i.ko)(),r=(0,g.A)(),{readDate:c}=e,l=n&&!c&&!t;return o.Ay.createElement(B.A,{icon:"message-read",className:_},o.Ay.createElement(q.Ay,{name:"fade",activeKey:l?1:2,className:"mg4sBQ9n"},l?o.Ay.createElement(U.A,{className:j}):o.Ay.createElement(o.Ay.Fragment,null,Boolean(c)&&r("PmReadAt",(0,H.U)(r,1e3*c)),!c&&t&&o.Ay.createElement("div",null,r("PmRead"),o.Ay.createElement("span",{className:"bmxij_dk",onClick:()=>{a(),s({chatId:e.chatId,isReadDate:!0})}},r("PmReadShowWhen"))))))})),G=(0,o.ph)((({isReactionPickerOpen:e,availableReactions:t,topReactions:n,defaultTagReactions:s,isOpen:c,message:u,poll:h,story:m,isPrivate:p,isCurrentUserPremium:v,enabledReactions:A,isWithPaidReaction:C,reactionsLimit:S,anchor:E,targetHref:b,canSendNow:H,canReschedule:_,canBuyPremium:j,canReply:q,canQuote:G,canEdit:J,noReplies:W,canPin:V,canUnpin:Y,canDelete:X,canForward:Z,canReport:Q,canFaveSticker:ee,canUnfaveSticker:te,canCopy:ne,canCopyLink:oe,canSelect:ie,canDownload:ae,canSaveGif:se,canRevote:re,canClosePoll:ce,canTranslate:le,canShowOriginal:de,canSelectLanguage:ue,isDownloading:he,repliesThreadInfo:me,canShowSeenBy:pe,canShowReactionsCount:fe,canShowReactionList:ye,seenByRecentPeers:ge,hasCustomEmoji:ve,customEmojiSets:Ae,canPlayAnimatedEmojis:Ce,isInSavedMessages:Se,shouldRenderShowWhen:Ee,canLoadReadDate:be,onReply:Ie,onOpenThread:we,onEdit:Re,onPin:Pe,onUnpin:Ne,onForward:Te,onDelete:xe,onFaveSticker:Me,onReport:ke,onUnfaveSticker:Le,onSelect:Oe,onSend:De,onReschedule:Be,onClose:Fe,onCloseAnimationEnd:Ue,onCopyLink:He,onCopyNumber:_e,onDownload:je,onSaveGif:Ke,onCancelVote:ze,onClosePoll:qe,onShowSeenBy:$e,onShowReactors:Ge,onToggleReaction:Je,onSendPaidReaction:We,onShowPaidReactionModal:Ve,onCopyMessages:Ye,onReactionPickerOpen:Xe,onTranslate:Ze,onShowOriginal:Qe,onSelectLanguage:et,userFullName:tt,canGift:nt})=>{const{showNotification:ot,openStickerSet:it,openCustomEmojiSets:at,loadStickers:st,openGiftModal:rt}=(0,i.ko)(),ct=(0,o.li)(null),lt=(0,o.li)(null),dt=(0,g.A)(),ut=!p&&!A,ht=u.areReactionsPossible,mt=ye&&!ut||ht,pt="isEdited"in u&&u.isEdited,ft=u.seenByDates,yt="giftPremium"===u.content.action?.type,gt="giftCode"===u.content.action?.type,vt="starGift"===u.content.action?.type,At="starGiftUnique"===u.content.action?.type,Ct=(0,r.L8)(u.chatId)&&nt&&(yt||gt||vt||At),[St,Et]=(0,f.A)(),[bt,It,wt]=(0,f.A)(),{isMobile:Rt,isDesktop:Pt}=(0,L.Ay)(),Nt=(0,o.Kr)((()=>ft?Object.keys(ft).length:0),[ft]),Tt=(0,y.A)((()=>{ot({message:dt("Share.Link.Copied")}),Fe()})),xt=(0,y.A)((()=>{rt({forUserId:u.chatId}),Fe()}));(0,o.vJ)((()=>{c&&St&&!e&&Fe()}),[Fe,c,e,St]),(0,o.vJ)((()=>{Ae?.length&&Ae.map((e=>st({stickerSetInfo:{id:e.id,accessHash:e.accessHash}})))}),[Ae,at]);const Mt=(0,y.A)((()=>{Ae&&(1===Ae.length?it({stickerSetInfo:{shortName:Ae[0].shortName}}):at({setIds:Ae.map((e=>e.id))}),Fe())})),kt=function(e,t,n,o,i,s,c,l){const u=[],h=(0,r.P5)(e),m=(0,r.yl)(e)||((0,r.QC)(e)?void 0:(0,r.dc)(e)),p=(0,r.Qm)(e),f=m?(0,r.rI)(m,"full"):void 0,y=o&&m&&(f||(0,r.KG)(m))&&d.WO&&!N.Yw,g=window.getSelection();if(y&&u.push({label:"lng_context_copy_image",icon:"copy-media",handler:()=>{Promise.resolve(f?x.hd(f,a.qZ.BlobUrl):m.blobUrl).then(d.qp),i?.()}}),o&&n)u.push({label:"lng_context_copy_link",icon:"copy",handler:()=>{(0,d.eM)(n),i?.()}});else if(o&&h){const n=Boolean(g?.anchorNode?.parentNode&&g.anchorNode.parentNode.closest(".Message .content-inner")&&""!==g.toString().replace(/(?:\r\n|\r|\n)/g,"")&&function(e){const t=window.getSelection(),n=t?.anchorNode?.parentNode,o=n?.closest(".Message.message-list-item");return(0,r.GZ)(e.id)===o?.id}(e));u.push({label:k(n),icon:"copy",handler:()=>{const o=(0,T.A)();if(o?.length&&c)c(o);else if(n)document.execCommand("copy");else{const n=(0,M.V)({message:e,shouldRenderAsHtml:!0});n&&(0,d.A)(n.join(""),(0,P.Gn)(e,t))}i?.()}})}return s&&u.push({label:"lng_context_copy_message_link",icon:"link",handler:s}),p&&l&&u.push({label:"lng_profile_copy_phone",icon:"copy",handler:()=>{l(),i?.()}}),u}(u,(0,r.FE)({poll:h,story:m}),b,ne,Tt,oe?He:void 0,Ye,_e),Lt=(0,y.A)((()=>document.querySelector(`.Transition_slide-active > .MessageList div[data-message-id="${u.id}"]`))),Ot=(0,y.A)((()=>document.querySelector(".Transition_slide-active > .MessageList"))),Dt=(0,y.A)((()=>document.querySelector(".MessageContextMenu .bubble"))),Bt=(0,y.A)((()=>{const e=Rt&&document.querySelector(".AudioPlayer-content")?.offsetHeight||0,t=document.getElementById("MiddleColumn"),n=getComputedStyle(t),o=parseFloat(n.getPropertyValue("--middle-header-panes-height"))||0;return{extraPaddingX:10,extraTopPadding:document.querySelector(".MiddleHeader").offsetHeight,extraMarginTop:o+e,shouldAvoidNegativePosition:!Pt,menuElMinWidth:mt&&Rt?19.25*w.$:void 0}}));(0,o.vJ)((()=>{c?setTimeout((()=>{It()}),200):wt()}),[c,It,wt]),(0,o.vJ)((()=>(0,I.M6)(lt.current,".ReactionPicker")),[c]);const Ft=(0,y.A)((e=>{Xe(e),Et()}));return o.Ay.createElement(D.A,{ref:ct,isOpen:c,anchor:E,getTriggerElement:Lt,getRootElement:Ot,getMenuElement:Dt,getLayout:Bt,withMaxHeight:!0,className:(0,l.A)("MessageContextMenu","fluid",mt&&"with-reactions"),onClose:Fe,onCloseAnimationEnd:Ue},mt&&o.Ay.createElement(z.A,{enabledReactions:A,topReactions:n,allAvailableReactions:t,defaultTagReactions:s,currentReactions:u.reactions?.results,reactionsLimit:S,onToggleReaction:Je,onSendPaidReaction:We,onShowPaidReactionModal:Ve,isWithPaidReaction:C,isPrivate:p,isReady:bt,canBuyPremium:j,isCurrentUserPremium:v,isInSavedMessages:Se,canPlayAnimatedEmojis:Ce,onShowMore:Ft,onClose:Fe,className:(0,l.A)(St&&"ReactionSelector-hidden")}),o.Ay.createElement("div",{ref:lt,className:(0,l.A)("MessageContextMenu_items scrollable-content custom-scroll",St&&"MessageContextMenu_items-hidden"),dir:dt.isRtl?"rtl":void 0},Ct&&o.Ay.createElement(B.A,{icon:"gift",onClick:xt},u?.isOutgoing?dt("SendAnotherGift"):dt("Conversation.ContextMenuSendGiftTo",tt)),H&&o.Ay.createElement(B.A,{icon:"send-outline",onClick:De},dt("MessageScheduleSend")),_&&o.Ay.createElement(B.A,{icon:"schedule",onClick:Be},dt("MessageScheduleEditTime")),q&&o.Ay.createElement(B.A,{icon:"reply",onClick:Ie},dt(G?"lng_context_quote_and_reply":"Reply")),!W&&Boolean(me?.messagesCount)&&o.Ay.createElement(B.A,{icon:"replies",onClick:we},dt("Conversation.ContextViewReplies",me.messagesCount,"i")),J&&o.Ay.createElement(B.A,{icon:"edit",onClick:Re},dt("Edit")),ee&&o.Ay.createElement(B.A,{icon:"favorite",onClick:Me},dt("AddToFavorites")),te&&o.Ay.createElement(B.A,{icon:"favorite",onClick:Le},dt("Stickers.RemoveFromFavorites")),le&&o.Ay.createElement(B.A,{icon:"language",onClick:Ze},dt("TranslateMessage")),de&&o.Ay.createElement(B.A,{icon:"language",onClick:Qe},dt("ShowOriginalButton")),ue&&o.Ay.createElement(B.A,{icon:"web",onClick:et},dt("lng_settings_change_lang")),kt.map((e=>o.Ay.createElement(B.A,{key:e.label,icon:e.icon,onClick:e.handler,withPreventDefaultOnMouseDown:!0},dt(e.label)))),V&&o.Ay.createElement(B.A,{icon:"pin",onClick:Pe},dt("DialogPin")),Y&&o.Ay.createElement(B.A,{icon:"unpin",onClick:Ne},dt("DialogUnpin")),se&&o.Ay.createElement(B.A,{icon:"gifs",onClick:Ke},dt("lng_context_save_gif")),re&&o.Ay.createElement(B.A,{icon:"revote",onClick:ze},dt("lng_polls_retract")),ce&&o.Ay.createElement(B.A,{icon:"stop",onClick:qe},dt("lng_polls_stop")),ae&&o.Ay.createElement(B.A,{icon:"download",onClick:je},dt(he?"lng_context_cancel_download":"lng_media_download")),Z&&o.Ay.createElement(B.A,{icon:"forward",onClick:Te},dt("Forward")),ie&&o.Ay.createElement(B.A,{icon:"select",onClick:Oe},dt("Common.Select")),Q&&o.Ay.createElement(B.A,{icon:"flag",onClick:ke},dt("lng_context_report_msg")),X&&o.Ay.createElement(B.A,{destructive:!0,icon:"delete",onClick:xe},dt("Delete")),ve&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(F.A,{size:"thick"}),!Ae&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(U.A,{inline:!0,className:"menu-loading-row"}),o.Ay.createElement(U.A,{inline:!0,className:"menu-loading-row"})),Ae&&1===Ae.length&&o.Ay.createElement(B.A,{withWrap:!0,onClick:Mt,className:"menu-custom-emoji-sets"},(0,R.A)(dt("MessageContainsEmojiPack",Ae[0].title),["simple_markdown","emoji"])),Ae&&Ae.length>1&&o.Ay.createElement(B.A,{withWrap:!0,onClick:Mt,className:"menu-custom-emoji-sets"},(0,R.A)(dt("MessageContainsEmojiPacks",Ae.length),["simple_markdown"]))),(pe||fe)&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(F.A,{size:ve?"thin":"thick"}),o.Ay.createElement(B.A,{icon:fe?"heart-outline":"group",onClick:fe?Ge:$e,disabled:!fe&&!Nt},o.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label-wrapper"},o.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label",dir:dt.isRtl?"rtl":void 0},fe&&u.reactors?.count?pe&&Nt?dt("Chat.OutgoingContextMixedReactionCount",[u.reactors.count,Nt]):dt("Chat.ContextReactionCount",u.reactors.count,"i"):1===Nt&&ge?(0,R.A)((0,r.L8)(ge[0].id)?(0,r.Yg)(ge[0]):ge[0].title):Nt?dt("Conversation.ContextMenuSeen",Nt,"i"):dt("Conversation.ContextMenuNoViews"))),o.Ay.createElement(O.A,{className:"avatars",size:"micro",peers:ge}))),(be||Ee||pt)&&o.Ay.createElement(F.A,{size:ve?"thin":"thick"}),(be||Ee)&&o.Ay.createElement($,{canLoadReadDate:be,shouldRenderShowWhen:Ee,message:u,closeContextMenu:Fe}),pt&&o.Ay.createElement(K,{message:u})))})),J=window.getSelection(),W=-1,V=(0,o.ph)((0,i.EK)(((e,{message:t,messageListType:n,detectedLanguage:o})=>{const{threadId:i}=(0,c.Xf0)(e)||{},{defaultTags:a,topReactions:l,availableReactions:d}=e.reactions,u=(0,c.yuw)(e),h=(0,c.hds)(e,t.chatId),m=h&&(0,r.L8)(h.id),p=m?void 0:(0,c.AWZ)(e,t.chatId),f=(0,c.mBe)(e,t.chatId),y=f&&(0,r.Yg)(f),{seenByExpiresAt:g,seenByMaxChatMembers:v,maxUniqueReactions:A,readDateExpiresAt:C}=e.appConfig||{},S=p?.reactionsLimit||A,{noOptions:E,canReplyGlobally:b,canPin:I,canUnpin:w,canDelete:R,canReport:P,canEdit:N,canFaveSticker:T,canUnfaveSticker:x,canCopy:M,canCopyLink:k,canSelect:L,canDownload:O,canSaveGif:D,canRevote:B,canClosePoll:F}=i&&(0,c.WAX)(e,t,i)||{},U=(0,c.R4s)(e,t),H=m?(0,c.K0y)(e,h.id):void 0,_=(0,r.Ie)(t),j=h&&(0,c.yps)(e,h.id),K=Boolean(j),z=(0,c.Jbz)(e,t),q=Boolean(m&&_&&!K&&!z&&C&&t.date>Date.now()/1e3-C&&!H?.isReadDateRestricted&&"scheduled"!==n),$=Boolean(q&&m&&(0,c.K0y)(e,h.id)?.isReadDateRestrictedByMe),G="pinned"===n,J="scheduled"===n,W=h&&(0,r.WX)(h),V=i&&(0,c.Vw0)(e,t.chatId,i),Y=Boolean(V&&!V?.isCommentsInfo&&V?.fromChannelId),X=i?(0,c.S0q)(e,t.chatId,i):void 0,Z=h&&!(0,r.Sq)(h,"sendPlain",p),Q=!(!h||!i)&&(0,r.__)(h,X,Y,p)&&Z,ee=(0,r.Nb)(t),te=(0,r.G5)(t),ne=Boolean(!ee&&h&&!z&&v&&g&&(0,r.YE)(h)&&_&&!J&&h.membersCount&&h.membersCount<=v&&t.date>Date.now()/1e3-g),oe=(0,r._P)(t),ie=!ee&&!W&&!J&&!oe&&!m&&t.reactions&&!(0,r.G)(t.reactions)&&t.reactions.canSeeList,ae=(0,c.ynf)(e,t),se=Boolean(t.content.contact),re=(0,c.g29)(e),ce=(0,c.S1W)(e,t),le=ce?.map((t=>(0,c.ycM)(e,t))),de=le?.every(Boolean)?le:void 0,ue=(0,c.Rny)(e,t.chatId,t.id),he=ue?Boolean((0,c.a_$)(e,t.chatId,ue)[t.id]?.text):void 0,me=!he&&(0,c.S86)(e,t,o),pe=(0,c.qZq)(e,t.chatId),fe=(0,c.nZ4)(e,t.chatId),ye=(0,c.zcZ)(e,t),ge=t.content.storyData,ve=ge?(0,c.Msb)(e,ge.peerId,ge.id):void 0,Ae=(0,c.X2D)(e,t.chatId);return{threadId:i,chat:h,availableReactions:d,topReactions:l,defaultTagReactions:a,noOptions:E,canReport:P,canSendNow:J,canReschedule:J,canReply:!G&&!J&&b,canPin:!J&&I,canUnpin:!J&&w,canDelete:R,canEdit:!G&&N,canForward:!J&&U,canFaveSticker:!J&&T,canUnfaveSticker:!J&&x,canCopy:se||!ae&&M,canCopyLink:!J&&k,canSelect:L,canDownload:!ae&&O,canSaveGif:!ae&&D,canRevote:B,canClosePoll:!J&&F,activeDownloads:u,canShowSeenBy:ne,canLoadReadDate:q,shouldRenderShowWhen:$,enabledReactions:h?.isForbidden?void 0:p?.enabledReactions,reactionsLimit:S,isPrivate:m,isCurrentUserPremium:re,hasFullInfo:Boolean(p),canShowReactionsCount:ie,canShowReactionList:!(ee||oe||J||h?.id===s.zv8||te),canBuyPremium:!re&&!(0,c.n_C)(e),customEmojiSetsInfo:ce,customEmojiSets:de,canScheduleUntilOnline:(0,c.RBq)(e,t.chatId),canTranslate:me,canShowOriginal:he&&!pe,canSelectLanguage:he&&!pe,isMessageTranslated:he,canPlayAnimatedEmojis:(0,c.BWX)(e),isReactionPickerOpen:(0,c.Ani)(e),isInSavedMessages:fe,isChannel:W,canReplyInChat:Q,isWithPaidReaction:p?.isPaidReactionAvailable,poll:ye,story:ve,userFullName:y,canGift:Ae}}))((({threadId:e,availableReactions:t,topReactions:n,defaultTagReactions:c,isOpen:u,messageListType:h,message:m,customEmojiSetsInfo:C,customEmojiSets:S,album:I,poll:w,story:R,anchor:P,targetHref:N,noOptions:T,canSendNow:x,hasFullInfo:M,canReschedule:k,canReply:L,canPin:O,repliesThreadInfo:D,canUnpin:B,canDelete:F,canShowReactionsCount:U,chat:H,canReport:_,canShowReactionList:j,canEdit:K,enabledReactions:z,reactionsLimit:q,isPrivate:$,isCurrentUserPremium:V,canForward:Y,canBuyPremium:X,canFaveSticker:Z,canUnfaveSticker:Q,canCopy:ee,canCopyLink:te,canSelect:ne,canDownload:oe,canSaveGif:ie,canRevote:ae,canClosePoll:se,canPlayAnimatedEmojis:re,canLoadReadDate:ce,shouldRenderShowWhen:le,activeDownloads:de,noReplies:ue,canShowSeenBy:he,canScheduleUntilOnline:me,canTranslate:pe,isMessageTranslated:fe,canShowOriginal:ye,canSelectLanguage:ge,isReactionPickerOpen:ve,isInSavedMessages:Ae,canReplyInChat:Ce,isWithPaidReaction:Se,userFullName:Ee,canGift:be,className:Ie,onClose:we,onCloseAnimationEnd:Re})=>{const{openThread:Pe,updateDraftReplyInfo:Ne,setEditingId:Te,pinMessage:xe,openForwardMenu:Me,openReplyMenu:ke,faveSticker:Le,unfaveSticker:Oe,toggleMessageSelection:De,sendScheduledMessages:Be,rescheduleMessage:Fe,downloadMedia:Ue,cancelMediaDownload:He,loadSeenBy:_e,openSeenByModal:je,openReactorListModal:Ke,loadFullChat:ze,loadReactors:qe,copyMessagesByIds:$e,saveGif:Ge,loadStickers:Je,cancelPollVote:We,closePoll:Ve,toggleReaction:Ye,requestMessageTranslation:Xe,showOriginalMessage:Ze,openChatLanguageModal:Qe,openMessageReactionPicker:et,openPremiumModal:tt,loadOutboxReadDate:nt,copyMessageLink:ot,openDeleteMessageModal:it,addLocalPaidReaction:at,openPaidReactionModal:st,reportMessages:rt}=(0,i.ko)(),ct=(0,g.A)(),{ref:lt}=(0,A.A)({isOpen:u,onCloseAnimationEnd:Re,className:!1}),[dt,ut]=(0,o.J0)(!0),[ht,mt]=(0,o.J0)(!1),[pt,ft,yt]=(0,f.A)(),[gt,vt]=(0,o.J0)(W),[At,Ct]=(0,v.A)(me,we,m.date),St=void 0===C||Boolean(C.length);(0,o.vJ)((()=>{he&&u&&_e({chatId:m.chatId,messageId:m.id})}),[_e,u,m.chatId,m.id,he]),(0,o.vJ)((()=>{ce&&u&&nt({chatId:m.chatId,messageId:m.id})}),[ce,u,m.chatId,m.id,m.readDate]),(0,o.vJ)((()=>{U&&u&&qe({chatId:m.chatId,messageId:m.id})}),[U,u,qe,m.chatId,m.id]),(0,o.vJ)((()=>{C?.length&&S?.length!==C.length&&C.forEach((e=>{Je({stickerSetInfo:e})}))}),[C,S,Je]),(0,o.vJ)((()=>{M||$||!u||ze({chatId:m.chatId})}),[M,u,$,ze,m.chatId]);const Et=(0,o.Kr)((()=>{const e=(0,i.mS)().chats.byId,t=(0,i.mS)().users.byId;if(m.reactions?.recentReactions?.length){const n=new Set(m.reactions?.recentReactions?.map((({peerId:n})=>t[n]||e[n])));return Array.from(n).filter(Boolean).slice(0,s.dqH)}if(m.seenByDates)return Object.keys(m.seenByDates).slice(0,s.dqH).map((n=>t[n]||e[n])).filter(Boolean)}),[m.reactions?.recentReactions,m.seenByDates]),bt=(0,o.Kr)((()=>{if(I)return I.messages.some((e=>{const t=(0,r.ed)(e);return!!t&&(0,r.$r)(de,t)}));const e=(0,r.ed)(m);return!!e&&(0,r.$r)(de,e)}),[de,I,m]),It=L&&J?.rangeCount?J.getRangeAt(0):void 0;(0,o.vJ)((()=>{if(fe)return void vt(W);if(!It||It.collapsed||!Boolean(m.content.text?.text)||!function(e){const t=e.commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentNode:t;return Boolean(n.closest(".message-content-wrapper .text-content"))&&!(Boolean(n.closest(".EmbeddedMessage"))||Boolean(n.closest(".WebPage")))}(It))return void vt(W);const e=p(It),t=m.content.text.text.replace(/\u00A0/g," ");e.text.trim().length>0&&t.includes(e.text)?vt(It.startOffset):vt(W)}),[It,It?.collapsed,It?.startOffset,It?.endOffset,fe,m.content.text]);const wt=(0,y.A)((()=>{ut(!1),we()})),Rt=(0,y.A)((()=>{ut(!1),wt();const e=I?.messages?I.messages.map((({id:e})=>e)):[m.id];it({chatId:m.chatId,messageIds:e,isSchedule:"scheduled"===h})})),Pt=(0,y.A)((()=>{mt(!1),we()})),Nt=(0,y.A)((()=>{const e=gt!==W&&It?p(It):void 0;Ce?Ne({replyToMsgId:m.id,quoteText:e,quoteOffset:gt,replyToPeerId:void 0}):ke({fromChatId:m.chatId,messageId:m.id,quoteText:e,quoteOffset:gt}),wt()})),Tt=(0,y.A)((()=>{Pe({chatId:m.chatId,threadId:m.id}),wt()})),xt=(0,y.A)((()=>{Te({messageId:m.id}),wt()})),Mt=(0,y.A)((()=>{ut(!1),mt(!0)})),kt=(0,y.A)((()=>{xe({chatId:m.chatId,messageId:m.id,isUnpin:!0}),wt()})),Lt=(0,y.A)((()=>{if(wt(),I?.messages){const e=I.messages.map((({id:e})=>e));Me({fromChatId:m.chatId,messageIds:e})}else Me({fromChatId:m.chatId,messageIds:[m.id]})})),Ot=(0,y.A)((()=>{wt(),Le({sticker:m.content.sticker})})),Dt=(0,y.A)((()=>{wt(),Oe({sticker:m.content.sticker})})),Bt=(0,y.A)((()=>{wt(),We({chatId:m.chatId,messageId:m.id})})),Ft=(0,y.A)((()=>{wt(),Ve({chatId:m.chatId,messageId:m.id})})),Ut=(0,y.A)((()=>{const e=I?.messages?{messageId:m.id,childMessageIds:I.messages.map((({id:e})=>e)),withShift:!1}:{messageId:m.id,withShift:!1};De(e),wt()})),Ht=(0,y.A)((()=>{Be({chatId:m.chatId,id:m.id}),wt()})),_t=(0,y.A)((e=>{Fe({chatId:m.chatId,messageId:m.id,scheduledAt:e}),we()})),jt=(0,y.A)((()=>{ut(!1),At(_t)})),Kt=(0,y.A)((()=>{wt(),je({chatId:m.chatId,messageId:m.id})})),zt=(0,y.A)((()=>{wt(),Ke({chatId:m.chatId,messageId:m.id})})),qt=(0,y.A)((e=>{$e({messageIds:e}),wt()})),$t=(0,y.A)((()=>{ot({chatId:m.chatId,messageId:m.id,shouldIncludeThread:e!==a.l3,shouldIncludeGrouped:!0}),wt()})),Gt=(0,y.A)((()=>{(0,d.eM)(m.content.contact.phoneNumber),wt()})),Jt=(0,y.A)((()=>{(I?.messages||[m]).forEach((e=>{const t=(0,r.ed)(e);t&&(bt?He({media:t}):Ue({media:t,originMessage:e}))})),wt()})),Wt=(0,y.A)((()=>{const e=(0,r.zX)(m);Ge({gif:e}),wt()})),Vt=(0,y.A)((e=>{Ae&&!V?tt({initialSection:"saved_tags"}):Ye({chatId:m.chatId,messageId:m.id,reaction:e,shouldAddToRecent:!0}),wt()})),Yt=(0,y.A)((()=>{at({chatId:m.chatId,messageId:m.id,count:1}),wt()})),Xt=(0,y.A)((()=>{st({chatId:m.chatId,messageId:m.id}),wt()})),Zt=(0,y.A)((e=>{et({chatId:m.chatId,messageId:m.id,position:e})})),Qt=(0,y.A)((()=>{Xe({chatId:m.chatId,id:m.id}),wt()})),en=(0,y.A)((()=>{Ze({chatId:m.chatId,id:m.id}),wt()})),tn=(0,y.A)((()=>{Qe({chatId:m.chatId,messageId:m.id}),wt()})),nn=(0,o.Kr)((()=>(I?I.messages:[m]).map((({id:e})=>e))),[I,m]),on=(0,y.A)((()=>{H&&(ut(!1),we(),rt({chatId:H.id,messageIds:nn}))}));if(T)return void wt();const an=new Date;return an.setFullYear(an.getFullYear()+1),o.Ay.createElement("div",{ref:lt,className:(0,l.A)("ContextMenuContainer",Ie)},o.Ay.createElement(G,{isReactionPickerOpen:ve,availableReactions:t,topReactions:n,defaultTagReactions:c,isWithPaidReaction:Se,message:m,isPrivate:$,isCurrentUserPremium:V,canBuyPremium:X,isOpen:dt,enabledReactions:z,reactionsLimit:q,anchor:P,targetHref:N,canShowReactionsCount:U,canShowReactionList:j,canSendNow:x,canReschedule:k,canReply:L,canQuote:gt!==W,canDelete:F,canPin:O,canReport:_,repliesThreadInfo:D,canUnpin:B,canEdit:K,canForward:Y,canFaveSticker:Z,canUnfaveSticker:Q,canCopy:ee,canCopyLink:te,canSelect:ne,canDownload:oe,canSaveGif:ie,canRevote:ae,canClosePoll:se,canShowSeenBy:he,canTranslate:pe,canShowOriginal:ye,canSelectLanguage:ge,canPlayAnimatedEmojis:re,shouldRenderShowWhen:le,canLoadReadDate:ce,hasCustomEmoji:St,customEmojiSets:S,isDownloading:bt,seenByRecentPeers:Et,isInSavedMessages:Ae,noReplies:ue,poll:w,story:R,onOpenThread:Tt,onReply:Nt,onEdit:xt,onPin:Mt,onUnpin:kt,onForward:Lt,onDelete:Rt,onReport:on,onFaveSticker:Ot,onUnfaveSticker:Dt,onSelect:Ut,onSend:Ht,onReschedule:jt,onClose:wt,onCopyLink:$t,onCopyMessages:qt,onCopyNumber:Gt,onDownload:Jt,onSaveGif:Wt,onCancelVote:Bt,onClosePoll:ft,onShowSeenBy:Kt,onToggleReaction:Vt,onSendPaidReaction:Yt,onShowPaidReactionModal:Xt,onShowReactors:zt,onReactionPickerOpen:Zt,onTranslate:Qt,onShowOriginal:en,onSelectLanguage:tn,userFullName:Ee,canGift:be}),o.Ay.createElement(E,{isOpen:ht,messageId:m.id,chatId:m.chatId,onClose:Pt}),o.Ay.createElement(b.A,{isOpen:pt,onClose:yt,text:ct("lng_polls_stop_warning"),confirmLabel:ct("lng_polls_stop_sure"),confirmHandler:Ft}),k&&Ct)})))},79519:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(61433),a=n(31481),s=n(66644),r=n(81954);const c=500,l=a.nxZ,d=20;function u({elementRef:e,chatId:t,isFocused:n,focusDirection:a,noFocusHighlight:u,isResizingContainer:h,isJustAdded:m,isQuote:p,scrollTargetPosition:f}){const y=(0,o.li)(!m);(0,o.Nf)((()=>{const t=y.current;if(y.current=!1,n&&e.current){const n=e.current.closest(".MessageList"),o=u,m=f||o?"end":"centerOrTop",y=()=>{const t=void 0!==a?o?c:l:void 0,u=(0,r.Ay)({container:n,element:e.current,position:m,margin:d,maxDistance:t,forceDirection:a,forceNormalContainerHeight:h,shouldReturnMutationFn:!0});if(p){const t=e.current.querySelector(".is-quote");t&&(0,s.RK)((()=>{(0,i.YM)(t,"animate")}))}return u};t?(0,s.gm)(y):(0,s.YS)((()=>{(0,s.RK)(y())}))}}),[e,t,n,a,u,h,p,f])}},76283:(e,t,n)=>{n.d(t,{A:()=>N});var o=n(84051),i=n(13439),a=n(90709),s=n(87357),r=n(17712),c=n(59030),l=n(18276),d=n(64493),u=n(96530),h=n(78376),m=n(76023),p=n(10722),f=n(4438),y=n(87412);const g="uGUjDZKl",v="M62HGuIV",A="WMpEr5XQ",C=2*m.$,S=(0,o.ph)((({reaction:e,chosen:t,isReady:n,noAppearAnimation:i,style:a,isLocked:c,onToggleReaction:d,onSendPaidReaction:u,onShowPaidReactionModal:m})=>{const S=(0,o.li)(null),E=(0,r.A)((()=>{"paid"!==e.type?d(e):u?.()})),{isContextMenuOpen:b,handleBeforeContextMenu:I,handleContextMenu:w,handleContextMenuClose:R,handleContextMenuHide:P}=(0,p.A)(S,"paid"!==e.type,void 0,void 0,void 0,!0);return(0,o.vJ)((()=>{b&&(m?.(),R(),P())}),[R,m,P,b]),o.Ay.createElement("div",{className:(0,s.A)(g,"oc1hpMwv",t&&"paid"!==e.type&&v,!i&&n&&"sx6RTuAU",i&&"kqcWe4tf"),ref:S,style:a,onClick:E,onMouseDown:I,onContextMenu:w},"paid"===e.type?o.Ay.createElement(f.A,{tgsUrl:h.w.StarReaction,size:C,noLoop:!1}):o.Ay.createElement(y.A,{documentId:e.documentId,size:C}),c&&o.Ay.createElement(l.A,{className:A,name:"lock-badge"}))}));var E=n(37661),b=n(62587),I=n(18104);const w=2*m.$,R=(0,o.ph)((({reaction:e,isReady:t,noAppearAnimation:n,chosen:i,isLocked:a,onToggleReaction:r})=>{const c=(0,b.A)(`sticker${e.appearAnimation?.id}`,!t||n),d=(0,b.A)(`document${e.selectAnimation?.id}`,!t||n),u=(0,b.A)(`document${e.staticIcon?.id}`,!n),[h,m]=(0,E.A)(),[p,,f]=(0,E.A)(!0),[y,C,S]=(0,E.A)();return o.Ay.createElement("div",{className:(0,s.A)(g,i&&v),onClick:function(){r(e.reaction)},onMouseEnter:t&&!p?C:void 0},n&&o.Ay.createElement("img",{className:"MZ2tH980",src:u,alt:e.reaction.emoticon,draggable:!1}),!h&&!n&&o.Ay.createElement(I.A,{key:e.appearAnimation?.id,tgsUrl:c,play:p,noLoop:!0,size:w,onEnded:f,forceAlways:!0}),!p&&!n&&o.Ay.createElement(I.A,{key:e.selectAnimation?.id,tgsUrl:d,play:y,noLoop:!0,size:w,onLoad:m,onEnded:S,forceAlways:!0}),a&&o.Ay.createElement(l.A,{className:A,name:"lock-badge"}))})),P=(0,s.x)("ReactionSelector"),N=(0,o.ph)((({allAvailableReactions:e,topReactions:t,defaultTagReactions:n,enabledReactions:h,currentReactions:m,reactionsLimit:p,isPrivate:f,isReady:y,canPlayAnimatedEmojis:g,className:v,isCurrentUserPremium:A,isInSavedMessages:C,isInStoryViewer:E,isForEffects:b,effectReactions:I,isWithPaidReaction:w,onClose:N,onToggleReaction:T,onSendPaidReaction:x,onShowPaidReactionModal:M,onShowMore:k})=>{const{openPremiumModal:L}=(0,i.ko)(),O=(0,o.li)(null),D=(0,c.A)(),B=C&&!A&&!E,F=Boolean(p&&m&&m.length>=p),U=(0,o.Kr)((()=>{const o=F?m?.map((e=>e.reaction)):b?I:C?n:"some"===h?.type?h.allowed:e?.map((e=>e.reaction)),i=o?.map((t=>{const n="custom"===t.type,o=e?.find((e=>(0,a.a0)(e.reaction,t)));return b?o:(n||o)&&!o?.isInactive&&(f||F||h&&(0,a.A3)(t,h))?n?t:o:void 0})).filter(Boolean)||[],s=(0,a.fu)(i,t);return w&&s.unshift({type:"paid"}),s}),[e,m,n,h,C,f,t,b,I,F,w]),H=(0,o.Kr)((()=>8===U.length?U:U.slice(0,7)),[U]),_=H.length<U.length,j=(0,o.Kr)((()=>{const e=m?.filter((({chosenOrder:e})=>void 0!==e))||[];return new Set(e.map((({reaction:e})=>H.findIndex((t=>t&&(0,a.a0)("reaction"in t?t.reaction:t,e))))))}),[m,H]),K=(0,r.A)((()=>{const e=O.current?.getBoundingClientRect()||{x:0,y:0};k({x:e.x,y:e.y})})),z=(0,r.A)((()=>{N?.(),L({initialSection:"saved_tags"})})),q=(0,o.Kr)((()=>{if(C){if(!A){const e=D("lng_subscribe_tag_about").split("{link}");return o.Ay.createElement("span",null,e[0],o.Ay.createElement(u.A,{isPrimary:!0,onClick:z},D("lng_subscribe_tag_link")),e[1])}return D("SavedTagReactionsHint2")}return E?D("StoryReactionsHint"):b?D("AddEffectMessageHint"):void 0}),[A,C,E,D,b]);if(H.length)return o.Ay.createElement("div",{className:(0,s.A)(P("&"),v),ref:O},o.Ay.createElement("div",{className:P("bubble-small",D.isRtl&&"isRtl")}),o.Ay.createElement("div",{className:P("items-wrapper")},o.Ay.createElement("div",{className:P("bubble-big",D.isRtl&&"isRtl")}),o.Ay.createElement("div",{className:P("items")},q&&o.Ay.createElement("div",{className:P("hint")},q),o.Ay.createElement("div",{className:P("reactions"),dir:D.isRtl?"rtl":void 0},H.map(((e,t)=>"reaction"in e?o.Ay.createElement(R,{key:(0,a.Jj)(e.reaction),isReady:y,onToggleReaction:T,reaction:e,noAppearAnimation:!g,chosen:j.has(t),isLocked:B}):o.Ay.createElement(S,{key:(0,a.Jj)(e),isReady:y,onToggleReaction:T,onSendPaidReaction:x,onShowPaidReactionModal:M,reaction:e,noAppearAnimation:!g,chosen:j.has(t),isLocked:B,style:`--_animation-delay: ${20*(7-t)}ms`}))),_&&o.Ay.createElement(d.A,{color:"translucent",className:P("show-more"),onClick:K},o.Ay.createElement(l.A,{name:"down"}))))))}))},43581:(e,t,n)=>{n.d(t,{A:()=>j});var o=n(84051),i=n(13439),a=n(90709),s=n(29807),r=n(87357),c=n(60343),l=n(15283),d=n(17712),u=n(59030),h=n(14242),m=n(76023),p=n(63527),f=n(10722),y=n(82117),g=n(39351),v=n(29886),A=n(21511),C=n(68292),S=n(26875),E=n(96454),b=n(78376),I=n(5912),w=n(4438),R=n(9267),P=n(93879);const N=1.5*m.$,T=6.5*m.$,x=E.pz||E.Ni?2:5,M=E.pz||E.Ni?2:3,k=(0,o.ph)((0,i.EK)(((e,{containerId:t})=>{const{activeReactions:n}=(0,s.nTw)(e),o=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:n?.[t],withEffects:o}}))((({containerId:e,reaction:t,className:n,size:s=N,effectSize:c=T,activeReactions:l,localAmount:u,withEffects:h,observeIntersection:m})=>{const{stopActiveReaction:p}=(0,i.ko)(),f=(0,o.li)(null),g=(0,o.li)(null),[v,C]=(0,o.J0)([]),S=(0,I.Vz)(f,m),E=(0,o.Kr)((()=>l?.find((e=>(0,a.a0)(e,t)))),[l,t]),k=Boolean(h&&E),L=v.length<x;(0,y.A)((([e])=>{k?!u||u<=(e||0)||L&&C((e=>[...e,Date.now()])):C([])}),[u,L,k]);const{shouldRender:O}=(0,A.A)({ref:g,noMountTransition:!0,isOpen:k,className:"slow",withShouldRender:!0}),D=(0,d.A)((()=>{const n=v.slice(1);C(n),n.length||p({containerId:e,reaction:t})})),B=(0,r.A)(P.A.root,O&&P.A.animating,n);return o.Ay.createElement("div",{className:B,ref:f,teactFastList:!0},o.Ay.createElement(R.A,{key:"icon",type:"gold",size:"adaptive",style:`width: ${s}px; height: ${s}px`}),O&&v.map((e=>o.Ay.createElement(w.A,{key:e,ref:g,className:P.A.effect,size:c,tgsUrl:b.w.StarReactionEffect,play:S,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:M,onEnded:D}))))})));var L=n(11241),O=n(85118),D=n(64493),B=n(69988);const F=1.25*m.$;function U(e){return e.stars}const H=(0,o.ph)((({reaction:e,containerId:t,isOwnMessage:n,recentReactors:s,className:c,chosenClassName:l,chatId:u,messageId:m,isOutside:E,observeIntersection:b,onClick:I,onPaidClick:w})=>{const{openStarsBalanceModal:R,resetLocalPaidReactions:P,openPaidReactionModal:N,requestWave:T}=(0,i.ko)(),x=(0,o.li)(null),M=(0,o.li)(null),H=(0,o.li)(),_=(0,g.A)(),j="paid"===e.reaction.type,K=(0,p.A)(U),z=Boolean(K),q=(0,d.A)(((e=1)=>{w?.(e)})),$=(0,d.A)((t=>{if("paid"===e.reaction.type)return t.stopPropagation(),void q();I?.(e.reaction)})),{isContextMenuOpen:G,handleBeforeContextMenu:J,handleContextMenu:W,handleContextMenuClose:V,handleContextMenuHide:Y}=(0,f.A)(x,"paid"!==e.reaction.type,void 0,void 0,void 0,!0);(0,o.vJ)((()=>{G&&(N({chatId:u,messageId:m}),V(),Y())}),[V,Y,G,u,m]),(0,y.A)((([t])=>{const n=e.localAmount,o=x.current;if(!n||!o||n===t?.localAmount)return;if(z&&n>K.balance.amount)return R({originReaction:{chatId:u,messageId:m,amount:n}}),void P({chatId:u,messageId:m});if(e.localAmount){const{left:e,top:t}=o.getBoundingClientRect(),n=e+o.offsetWidth/2,i=t+o.offsetHeight/2;T({startX:n,startY:i})}const i=Number(getComputedStyle(o).scale)||1;H.current?.cancel(),H.current=o.animate([{scale:i},{scale:Math.min(1.2*i,3),offset:.2},{scale:1}],{duration:500*i,easing:"ease-out"})}),[e,K?.balance,z,u,m]);const X=(0,v.A)(e.localAmount),{shouldRender:Z}=(0,A.A)({isOpen:Boolean(e.localAmount),ref:M,className:"slow",withShouldRender:!0});return o.Ay.createElement(D.A,{className:(0,r.A)(B.A.root,n&&B.A.own,j&&B.A.paid,E&&B.A.outside,(0,a.eu)(e)&&B.A.chosen,(0,a.eu)(e)&&l,c),size:"tiny",ref:x,onMouseDown:J,onContextMenu:W,onClick:$},"paid"===e.reaction.type?o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(O.A,{preset:"button"}),o.Ay.createElement(k,{className:B.A.animatedEmoji,containerId:t,reaction:e.reaction,size:F,localAmount:e.localAmount,observeIntersection:b}),Z&&o.Ay.createElement(C.A,{ref:M,text:`+${(0,h.Vw)(_,e.localAmount||X)}`,className:B.A.paidCounter})):o.Ay.createElement(L.A,{className:B.A.animatedEmoji,containerId:t,reaction:e.reaction,size:F,observeIntersection:b}),s?.length?o.Ay.createElement(S.A,{size:"mini",peers:s}):o.Ay.createElement(C.A,{text:(0,h.Vw)(_,e.count+(e.localAmount||0)),className:B.A.counter}))}));var _=n(92915);const j=(0,o.ph)((({message:e,threadId:t,isOutside:n,maxWidth:h,metaChildren:m,observeIntersection:p,noRecentReactors:f,isCurrentUserPremium:y,tags:g,isAccountFrozen:v})=>{const{toggleReaction:A,addLocalPaidReaction:C,updateMiddleSearch:S,performMiddleSearch:E,openPremiumModal:b,resetLocalPaidReactions:I,showNotification:w,openFrozenAccountModal:R}=(0,i.ko)(),P=(0,u.A)(),{results:N,areTags:T,recentReactions:x}=e.reactions,M=Boolean(e.areReactionsPossible&&e.reactions),k=(0,o.Kr)((()=>N.reduce(((e,t)=>e+t.count),0)),[N]),L=(0,o.Kr)((()=>{const e=(0,i.mS)();return x?.reduce(((t,n)=>{const{reaction:o,peerId:i}=n,r=(0,a.Jj)(o),c=(0,s.PVB)(e,i);if(!c)return t;const l=t[r]||[];return l.push(c),t[r]=l,t}),{})}),[x]),O=(0,o.Kr)((()=>{const t=(0,c.bj)(e);return N.map((e=>{const n=(0,a.Jj)(e.reaction),o=L?.[n],i=k>3||f,s=T?g?.[n]:void 0;return{reaction:e,reactionKey:n,messageKey:t,recentReactors:i?void 0:o,isChosen:(0,a.eu)(e),tag:s}}))}),[e,f,L,N,T,g,k]),D=(0,d.A)((n=>{if(!v)return T?y?(S({chatId:e.chatId,threadId:t,update:{savedTag:n}}),void E({chatId:e.chatId,threadId:t})):void b({initialSection:"saved_tags"}):void A({chatId:e.chatId,messageId:e.id,reaction:n});R()})),B=(0,o.Kr)((()=>N.find((e=>"paid"===e.reaction.type))?.localAmount||0),[N]),F=(0,d.A)((t=>{v?R():C({chatId:e.chatId,messageId:e.id,count:t})}));(0,o.vJ)((()=>{B&&w({localId:(0,c.bj)(e),title:P("StarsSentTitle"),message:P("StarsSentText",B),actionText:P("StarsSentUndo"),cacheBreaker:B.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:e.chatId,messageId:e.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:e.chatId,messageId:e.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})}),[P,e,B]);const U=(0,d.A)((t=>{v?R():A({chatId:e.chatId,messageId:e.id,reaction:t})}));return(0,l.A)((()=>()=>{I({chatId:e.chatId,messageId:e.id})})),o.Ay.createElement("div",{className:(0,r.A)("Reactions",n&&"is-outside",M&&"is-service"),style:h?`max-width: ${h}px`:void 0,dir:P.isRtl?"rtl":"ltr"},O.map((({reaction:t,recentReactors:i,messageKey:a,reactionKey:s,isChosen:r,tag:c})=>T?o.Ay.createElement(_.A,{key:s,className:"message-reaction",chosenClassName:"chosen",containerId:a,isOwnMessage:e.isOutgoing,isChosen:r,reaction:t.reaction,tag:c,withContextMenu:y,onClick:D,onRemove:U,observeIntersection:p}):o.Ay.createElement(H,{key:s,chatId:e.chatId,messageId:e.id,className:"message-reaction",chosenClassName:"chosen",containerId:a,isOwnMessage:e.isOutgoing,recentReactors:i,isOutside:n,reaction:t,onClick:D,onPaidClick:F,observeIntersection:p}))),m)}))},92915:(e,t,n)=>{n.d(t,{A:()=>C});var o=n(84051),i=n(13439),a=n(87357),s=n(76023),r=n(10722),c=n(37661),l=n(17712),d=n(59030),u=n(11241),h=n(64493),m=n(40664),p=n(8410);const f=(0,o.ph)((({isOpen:e,title:t,subtitle:n,placeholder:i,submitText:a,maxLength:s,initialValue:r="",onClose:c,onSubmit:u})=>{const f=(0,d.A)(),[y,g]=(0,o.J0)(r),v=(0,l.A)((e=>{g(e.target.value)})),A=(0,l.A)((()=>{u(y)}));return o.Ay.createElement(p.A,{className:"narrow",title:t,isOpen:e,onClose:c,isSlim:!0},Boolean(n)&&o.Ay.createElement("div",{className:"cGrbcqD_"},n),o.Ay.createElement(m.A,{placeholder:i,value:y,onChange:v,maxLength:s,teactExperimentControlled:!0}),o.Ay.createElement("div",{className:"dialog-buttons mt-2"},o.Ay.createElement(h.A,{className:"confirm-dialog-button",onClick:A},a||f("Save")),o.Ay.createElement(h.A,{className:"confirm-dialog-button",isText:!0,onClick:c},f("Cancel"))))}));var y=n(71429),g=n(24433),v=n(69988);const A=1.25*s.$,C=(0,o.ph)((({reaction:e,tag:t,containerId:n,isChosen:s,isOwnMessage:m,className:p,chosenClassName:C,withCount:S,isDisabled:E,withContextMenu:b,observeIntersection:I,onClick:w,onRemove:R})=>{const{editSavedReactionTag:P}=(0,i.ko)(),N=(0,o.li)(null),T=(0,o.li)(null),x=(0,d.A)(),[M,k,L]=(0,c.A)(),{title:O,count:D}=t||{},B=Boolean(O||S&&D),F=(0,l.A)((()=>{w?.(e)})),U=(0,l.A)((()=>{R?.(e)})),H=(0,l.A)((t=>{P({reaction:e,title:t}),L()})),{isContextMenuOpen:_,contextMenuAnchor:j,handleBeforeContextMenu:K,handleContextMenu:z,handleContextMenuClose:q,handleContextMenuHide:$}=(0,r.A)(N,!b,void 0,void 0,void 0,!0),G=(0,l.A)((()=>N.current)),J=(0,l.A)((()=>document.body)),W=(0,l.A)((()=>T.current)),V=(0,l.A)((()=>({withPortal:!0,shouldAvoidNegativePosition:!0})));if(!S||0!==D)return o.Ay.createElement(h.A,{className:(0,a.A)(v.A.root,v.A.tag,m&&v.A.own,s&&v.A.chosen,s&&C,E&&v.A.disabled,p),size:"tiny",onClick:F,onMouseDown:K,onContextMenu:z,ref:N},o.Ay.createElement(u.A,{className:v.A.animatedEmoji,containerId:n,reaction:e,loopLimit:1,size:A,observeIntersection:I}),B&&o.Ay.createElement("span",{className:v.A.tagText},O&&o.Ay.createElement("span",null,O),S&&o.Ay.createElement("span",null,D)),o.Ay.createElement("svg",{className:v.A.tail,width:"15",height:"30",viewBox:"0 0 15 30"},o.Ay.createElement("path",{className:v.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})),b&&o.Ay.createElement(f,{isOpen:M,maxLength:15,title:x(t?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:x("SavedTagLabelTagText"),placeholder:x("SavedTagLabelPlaceholder"),initialValue:t?.title,onClose:L,onSubmit:H}),b&&j&&o.Ay.createElement(y.A,{ref:T,isOpen:_,anchor:j,getTriggerElement:G,getRootElement:J,getMenuElement:W,getLayout:V,autoClose:!0,withPortal:!0,onClose:q,onCloseAnimationEnd:$},o.Ay.createElement(g.A,{icon:"tag-filter",onClick:F},x("SavedTagFilterByTag")),o.Ay.createElement(g.A,{icon:"tag-name",onClick:k},x(t?.title?"SavedTagRenameTag":"SavedTagLabelTag")),o.Ay.createElement(g.A,{icon:"tag-crossed",destructive:!0,onClick:U},x("SavedTagRemoveTag"))))}))},86046:(e,t,n)=>{n.d(t,{D5:()=>u,HT:()=>s,M6:()=>d,Pc:()=>r,ZF:()=>l,hk:()=>c,j6:()=>h,jA:()=>a});var o=n(5930),i=n(29807);function a(e,t){if("slug"===t.type)return t;if("stargift"===t.type){const{peerId:n,shouldHideName:o,giftId:a,message:s,shouldUpgrade:r}=t,c=(0,i.PVB)(e,n);if(!c)return;return{type:"stargift",peer:c,shouldHideName:o,giftId:a,message:s,shouldUpgrade:r}}if("starsgift"===t.type){const{userId:n,stars:o,amount:a,currency:s}=t,r=(0,i.mBe)(e,n);if(!r)return;return{type:"stars",purpose:{type:"starsgift",user:r,stars:o,amount:a,currency:s}}}if("stars"===t.type){const{stars:e,amount:n,currency:o}=t;return{type:"stars",purpose:{type:"stars",stars:e,amount:n,currency:o}}}if("chatInviteSubscription"===t.type){const{hash:e}=t;return{type:"chatInviteSubscription",hash:e}}if("message"===t.type){const n=(0,i.hds)(e,t.chatId);if(!n)return;return{type:"message",chat:n,messageId:t.messageId}}if("premiumGiftStars"===t.type){const{months:n,userId:o,message:a}=t,s=(0,i.mBe)(e,o);if(!s)return;return{type:"premiumGiftStars",months:n,message:a,user:s}}if("giftcode"===t.type){const{userIds:n,boostChannelId:o,amount:a,currency:s,option:r,message:c}=t;return{type:"giveaway",option:r,purpose:{type:"giftcode",amount:a,currency:s,users:n.map((t=>(0,i.mBe)(e,t))).filter(Boolean),boostChannel:o?(0,i.hds)(e,o):void 0,message:c}}}if("starsgiveaway"===t.type){const{chatId:n,additionalChannelIds:o,amount:a,currency:s,untilDate:r,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:u,stars:h,users:m}=t,p=(0,i.hds)(e,n);if(!p)return;const f=o?.map((t=>(0,i.hds)(e,t))).filter(Boolean);return{type:"starsgiveaway",purpose:{type:"starsgiveaway",amount:a,currency:s,chat:p,additionalChannels:f,untilDate:r,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:u,stars:h,users:m}}}if("giveaway"===t.type){const{chatId:n,additionalChannelIds:o,amount:a,currency:s,option:r,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:u,prizeDescription:h}=t,m=(0,i.hds)(e,n);if(!m)return;const p=o?.map((t=>(0,i.hds)(e,t))).filter(Boolean);return{type:"giveaway",option:r,purpose:{type:"giveaway",amount:a,currency:s,chat:m,additionalChannels:p,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:u,prizeDescription:h}}}if("stargiftUpgrade"===t.type){const{inputSavedGift:n,shouldKeepOriginalDetails:o}=t,i=s(e,n);if(!i)return;return{type:"stargiftUpgrade",inputSavedGift:i,shouldKeepOriginalDetails:o}}if("stargiftTransfer"===t.type){const{inputSavedGift:n,recipientId:o}=t,a=s(e,n),r=(0,i.PVB)(e,o);if(!a||!r)return;return{type:"stargiftTransfer",inputSavedGift:a,recipient:r}}}function s(e,t){if("user"===t.type)return t;if("chat"===t.type){const n=(0,i.hds)(e,t.chatId);if(!n)return;return{type:"chat",chat:n,savedId:t.savedId}}}function r(e){return"appStore"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.AppleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.AppleTopUp.Subtitle",peerColorId:5}:"playMarket"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.GoogleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.GoogleTopUp.Subtitle",peerColorId:3}:"fragment"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.FragmentTopUp.Title",subtitleKey:"Stars.Intro.Transaction.FragmentTopUp.Subtitle",customPeerAvatarColor:"#000000"}:"premiumBot"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Title",subtitleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Subtitle",peerColorId:1,withPremiumGradient:!0}:"ads"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramAds.Title",subtitleKey:"Stars.Intro.Transaction.TelegramAds.Subtitle",peerColorId:2}:"api"===e.type?{avatarIcon:"bots",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramBotApi.Title",subtitleKey:"Stars.Intro.Transaction.TelegramBotApi.Subtitle",peerColorId:4}:{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.Unsupported.Title",subtitleKey:"Stars.Intro.Transaction.Unsupported.Title",peerColorId:0}}function c(e,t){const n=t.amount+t.nanos/1e9;return n<0?`- ${e.number(Math.abs(n))}`:`+ ${e.number(n)}`}function l(e,t){return e.number(t.amount+t.nanos/1e9)}function d(e){const{action:t}=e.content;if("giftStars"!==t?.type)return;const{transactionId:n,stars:o}=t;return{id:n,stars:{amount:o,nanos:0},peer:{type:"peer",id:e.isOutgoing?e.chatId:e.senderId||e.chatId},date:e.date,isGift:!0,isMyGift:e.isOutgoing||void 0}}function u(e){const{action:t}=e.content;if("prizeStars"!==t?.type)return;const{transactionId:n,stars:o,boostPeerId:i}=t;return{id:n,stars:{amount:o,nanos:0},peer:{type:"peer",id:i},date:e.date,giveawayPostId:e.id}}function h(e,t){return(0,o.A)(e,t)}},14737:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(17712);const a=function(e,t){const n=(0,i.A)(e);(0,o.vJ)((()=>{if("number"!=typeof t)return;const e=setTimeout((()=>n()),t);return()=>clearTimeout(e)}),[t])}},45470:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(84051),i=n(32610),a=n(66644),s=n(96454),r=n(35297);const c=2,l=2;function d(e,t=!1,n,d=c,u,h){const m=(0,o.li)(null),p=(0,o.li)();return(0,r.A)((()=>{t||(p.current=!1)}),[e,t]),(0,o.vJ)((()=>{const o=m.current;if(!e||!o||t||p.current)return;p.current=!0;const r=new Image,c=()=>{const e=u||r.width,t=h||r.height,n=o.getContext("2d",{alpha:!1});(0,a.RK)((()=>{o.width=e,o.height=t,s.QH&&(n.filter=`blur(${d}px)`),n.drawImage(r,2*-d,2*-d,e+4*d,t+4*d),s.QH||(0,i.A)(n,0,0,e,t,d,l)}))};r.onload=()=>{n?(0,a.YS)(c):c()},r.src=e}),[e,t,h,u,d,n]),m}},65632:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(84051),i=n(13439),a=n(31481),s=n(74824),r=n(87679);const c=(e,t,n)=>{const{setThemeSettings:c}=(0,i.ko)(),[l,d]=(0,o.J0)(t);return(0,o.vJ)((()=>{if(!t)return d(void 0),void n?.();t.startsWith("#")?(d(t),n?.()):s.fetch(a.nfi,e,s.Type.Blob).then((e=>{const t=URL.createObjectURL(e);(0,r.NN)(t).then((()=>{d(`url(${t})`),n?.()}))})).catch((()=>{c({theme:e,fill:void 0,background:void 0,backgroundColor:void 0,isBlurred:!0,patternColor:"dark"===e?a.MkD:a.be8})}))}),[t,e,n]),t?l:void 0}},49746:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(13439);function a(e,t,n,a,s){const{loadMessage:r}=(0,i.ko)();(0,o.vJ)((()=>{s||t&&!n&&r({chatId:e,messageId:t,replyOriginForId:a})}),[s,e,n,t,a])}},74984:(e,t,n)=>{n.d(t,{Jm:()=>l,Rh:()=>s,g5:()=>c,ic:()=>r});var o=n(84051),i=n(49763),a=n(30857);function s(e){const t=(0,a.A)();return(0,o.vJ)((()=>(0,i.Yw)(e,t)),[e,t]),(0,i.YA)(e)}function r(){const e=(0,a.A)();return(0,o.vJ)((()=>(0,i.P1)(e)),[e]),(0,i.PZ)()}function c(){const e=(0,a.A)();return(0,o.vJ)((()=>(0,i.BU)(e)),[e]),(0,i.jn)()}function l(){const e=(0,a.A)();return(0,o.vJ)((()=>(0,i.dk)(e)),[e]),(0,i.Xq)()}},36838:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);const i=(e,t,n=!1)=>{(0,o.vJ)((()=>{if(t)return;const o=e.current;function i(e){e.deltaX||(o.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return o.addEventListener("wheel",i,{passive:!n}),()=>{o.removeEventListener("wheel",i)}}),[e,t,n])}},29886:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);function i(e){const t=(0,o.li)(),n=(0,o.li)();return n.current!==e&&(t.current=n.current),n.current=e,t.current}},14622:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(13439),a=n(81954),s=n(17712),r=n(93545),c=n(672);const l=function(e,t=!1){const{focusLastMessage:n}=(0,i.ko)(),l=(0,o.li)(0),d=(0,s.A)((e=>{const t=l.current,i=e.contentRect.height;if(l.current=i,(0,a.o8)()||!t||i<=t)return;const s=e.target.closest(".MessageList");if(!s)return;(0,o.VK)(400);const r=i-t,{offsetHeight:c,scrollHeight:d,scrollTop:u}=s;Math.round(d-u-c)-r<=5&&n()})),u=(0,c.A)(d,[d],300,!1);(0,r.A)(e,u,!t)}},56133:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(16581);function i(e,t,n,i=[]){return(0,o.A)((e=>{e()}),i,e,t,n)}},24531:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(31481),a=n(17663),s=n(80140),r=n(17712),c=n(59030),l=n(80089),d=n(80464);const u=e=>{const{isOpen:t}=e,n=(0,d.A)(l.ar.Extra,"CalendarModal",!t);return n?o.Ay.createElement(n,e):void 0},h=(e,t,n)=>{const l=(0,c.A)(),[d,h]=(0,o.J0)(),m=(0,r.A)(((e,t=!1)=>{const n=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3)+(t?0:(0,s.SF)());d?.(n),h(void 0)})),p=(0,r.A)((()=>{m(new Date(1e3*i.NkL),!0)})),f=(0,r.A)((()=>{h(void 0),t?.()})),y=(0,r.A)((e=>{h((()=>e))})),g=n?new Date(1e3*n):new Date;g.setSeconds(0),g.setMilliseconds(0);const v=new Date;return v.setFullYear(v.getFullYear()+1),[y,o.Ay.createElement(u,{isOpen:Boolean(d),withTimePicker:!0,selectedAt:g.getTime(),maxAt:(0,a.CS)(v),isFutureMode:!0,secondButtonLabel:e?l("Schedule.SendWhenOnline"):void 0,onClose:f,onSubmit:m,onSecondButtonClick:e?p:void 0})]}},40107:(e,t,n)=>{n.d(t,{VP:()=>r});var o=n(66644),i=n(28834);function a(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){const o=e.createShader(t);if(e.shaderSource(o,n),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${e.getShaderInfoLog(o)}`);return o}class r extends i.e7{constructor(e,t){super(e,t),a(this,"gl",void 0),a(this,"glState",void 0),this.gl=this.canvas.getContext("webgl"),!this.gl&&this.canvas instanceof HTMLCanvasElement&&(this.gl=this.canvas.getContext("experimental-webgl")),this.glState=null;try{this.glState=this.createGLState(),this.syncState(),this.render()}catch(e){console.error("Failed to create GL state",e)}}renderBitmap([e,t],n,i=0,a=0){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Can render bitmap only offscreen");return this.gl?((0,o.RK)((()=>{this.canvas.width=e,this.canvas.height=t})),this.curPos=i,this.colors=n,this.syncState(),this.render(a),this.canvas.transferToImageBitmap()):null}createGLState(){if(!this.gl)throw new Error("No GL context");const e=this.gl,t=e.createProgram();if(!t)throw new Error("No WebGLProgram found");e.attachShader(t,s(e,e.VERTEX_SHADER,"\nattribute vec2 a_position;\n\nvoid main() {\n gl_Position = vec4(a_position, 1, 1);\n}")),e.attachShader(t,s(this.gl,e.FRAGMENT_SHADER,"\nprecision highp float;\n\nstruct ColorPoint {\n  vec4 color;\n  vec2 pos;\n  vec2 prevPos;\n};\n\nuniform ColorPoint colorPoints[4];\nuniform vec2 resolution;\nuniform float transitionFactor;\n\nvoid main() {\n  vec2 position = gl_FragCoord.xy / resolution.xy;\n\n  position.y = 1.0 - position.y;\n\n  float centerDistanceX = position.x - 0.5;\n  float centerDistanceY = position.y - 0.5;\n  float centerDistance = sqrt(centerDistanceX * centerDistanceX + centerDistanceY * centerDistanceY);\n  float swirlFactor = 0.35 * centerDistance;\n  float theta = swirlFactor * swirlFactor * 0.8 * 8.0;\n  float sinTheta = sin(theta);\n  float cosTheta = cos(theta);\n\n  float pixelX = max(0.0, min(1.0, 0.5 + centerDistanceX * cosTheta - centerDistanceY * sinTheta));\n  float pixelY = max(0.0, min(1.0, 0.5 + centerDistanceX * sinTheta + centerDistanceY * cosTheta));\n\n  vec2 pixelPos = vec2(pixelX, 1.-pixelY);\n\n  float p = 4.0;\n  float dpt = 0.0;\n  vec4 gradColor = vec4(0.0, 0.0, 0.0, 0.0);\n  for(int i = 0; i < 4; i++) {\n    vec2 pointPos = colorPoints[i].pos * (1.0 - transitionFactor) + colorPoints[i].prevPos * transitionFactor;\n    float distance = max(0.0, 0.9 - distance(pixelPos, pointPos));\n    float dpp = pow(distance, p);\n    dpt += dpp;\n    gradColor += colorPoints[i].color * dpp;\n  }\n\n  gradColor.w = dpt;\n  gl_FragColor = gradColor / dpt;\n}\n")),e.linkProgram(t),e.useProgram(t);const n=e.getAttribLocation(t,"a_position"),o=e.createBuffer();if(!o)throw new Error("No WebGL buffer created");e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([[-1,-1,1,-1,-1,1],[-1,1,1,-1,1,1]].flat()),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);const i=[];for(let n=0;n<4;n++){const o=e.getUniformLocation(t,`colorPoints[${n}].color`),a=e.getUniformLocation(t,`colorPoints[${n}].pos`),s=e.getUniformLocation(t,`colorPoints[${n}].prevPos`);i.push({colorLoc:o,posLoc:a,prevPosLoc:s})}return{prog:t,posBuf:o,colorPoints:i,resolutionLoc:e.getUniformLocation(t,"resolution"),transitionFactorLoc:e.getUniformLocation(t,"transitionFactor")}}syncState(){if(!this.gl||!this.glState)return;this.shouldStop=!1;const e=this.gl;e.viewport(0,0,e.canvas.width,e.canvas.height),e.useProgram(this.glState.prog),e.uniform2fv(this.glState.resolutionLoc,[e.canvas.width,e.canvas.height]);for(let t=0;t<4;t++){const{colorLoc:n,posLoc:o,prevPosLoc:a}=this.glState.colorPoints[t],s=this.colors[t];e.uniform4f(n,s[0]/255,s[1]/255,s[2]/255,s[3]/255),e.uniform2f(o,...i.JP[(this.curPos+2*t)%8]),e.uniform2f(a,...i.JP[(this.curPos+7+2*t)%8])}}render(e){if(!this.gl||!this.glState){const e=this.colors[0];return void(this.canvas instanceof HTMLCanvasElement&&(this.canvas.style.backgroundColor=`rgb(${e[0]}, ${e[1]}, ${e[2]})`))}const t=this.gl,{posBuf:n,transitionFactorLoc:o}=this.glState;t.useProgram(this.glState.prog),t.bindBuffer(t.ARRAY_BUFFER,n),t.uniform1f(o,1-(e??this.getTransitionProgress())),t.drawArrays(t.TRIANGLES,0,6)}}},28834:(e,t,n)=>{n.d(t,{JP:()=>r,e7:()=>c,mh:()=>s});var o=n(66644),i=n(37836);function a(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){e.first||(e.first=16777215);const t=[255&e.first,e.first>>8&255,e.first>>16&255,255];e.second||(e.second=e.first);const n=[255&e.second,e.second>>8&255,e.second>>16&255,255];e.third||(e.third=e.second);const o=[255&e.third,e.third>>8&255,e.third>>16&255,255];return e.fourth||(e.fourth=e.third),[t,n,o,[255&e.fourth,e.fourth>>8&255,e.fourth>>16&255,255]]}const r=[[.8,.1],[.6,.2],[.35,.25],[.25,.6],[.2,.9],[.4,.8],[.65,.75],[.75,.4]];class c{constructor(e,t){a(this,"container",void 0),a(this,"canvas",void 0),a(this,"shouldStop",!1),a(this,"resObserver",void 0),a(this,"colors",void 0),a(this,"curPos",0),a(this,"transitionStart",void 0),t&&e?(this.container=t,this.canvas=e):(this.container=null,this.canvas=new OffscreenCanvas(50,50)),this.colors=[[254,196,150,255],[221,108,185,255],[150,47,191,255],[79,91,213,255]],this.container?(this.resObserver=new ResizeObserver((e=>{(0,o.RK)((()=>{0!==e[0]?.contentRect.width&&(this.canvas.width=e[0]?.contentRect?.width??50,this.canvas.height=e[0]?.contentRect?.height??50,this.syncState(),this.render())}))})),this.resObserver.observe(this.container)):this.resObserver=null,this.transitionStart=performance.now()-400}nextState(){this.curPos=(this.curPos+1)%8,this.transitionStart=performance.now(),this.syncState(),this.renderLoop()}setColors(e){this.colors=e,this.syncState(),this.render()}detach(){this.shouldStop=!0,this.resObserver?.disconnect()}getTransitionProgress(){let e=(performance.now()-this.transitionStart)/200;return e>1&&(e=1),e}renderLoop(){if(this.shouldStop)return;const e=this.getTransitionProgress();this.render(e),1!==e&&(0,i.IJ)((()=>this.renderLoop()))}}},57446:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(13439),i=n(66644),a=n(29807),s=n(19822);const r=300,c=new Map;function l(e,t,n=r){(0,a.PKK)((0,o.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:u,scrollWidth:h,dataset:{scrollId:m}}=e;let p=t-d;if(p<0){const e=-d*(l?-1:1);p=Math.max(p,e)}else if(p>0){const e=h-(d+u);p=Math.min(p,e)}if(0===p)return Promise.resolve();m&&c.has(m)&&c.get(m)();const f=d+p;return new Promise((t=>{(0,i.RK)((()=>{if(0===n)return e.scrollLeft=f,void t();let o=!1;const a=Math.random().toString();e.dataset.scrollId=a,c.set(a,(()=>{o=!0})),e.style.scrollSnapType="none";const r=Date.now();function l(){e.style.scrollSnapType="",delete e.dataset.scrollId,c.delete(a)}(0,s.i0)((()=>{if(o)return l(),!1;const i=Math.min((Date.now()-r)/n,1),a=p*(1-function(e){return 1-(1-e)**3.5}(i));return e.scrollLeft=Math.round(f-a),i>=1&&(l(),t()),i<1}),i.RK)}))}))}},81954:(e,t,n)=>{n.d(t,{Ay:()=>f,H$:()=>A,_v:()=>y,o8:()=>v});var o=n(84051),i=n(13439),a=n(89925),s=n(31481),r=n(66644),c=n(29807),l=n(96454),d=n(16460),u=n(19822);let h,m,p=!1;function f(e){h=e;const t=g(e);if(e.shouldReturnMutationFn)return t;(0,r.RK)(t)}function y(){p&&((0,u.vk)(),(0,r.YS)((()=>{(0,r.RK)(g(h))})))}function g(e){const{container:t,element:n,position:f,margin:y=0,maxDistance:g=s.nxZ,forceDirection:v,forceNormalContainerHeight:A}=e;let E=e.forceDuration;v!==a.CC.Static&&(0,c.PKK)((0,i.mS)())||(E=0);const{offsetHeight:b}=n,{scrollTop:I,offsetHeight:w,scrollHeight:R}=t,P=(0,d.A)(n,t).top,N=A&&t.dataset.normalHeight?Number(t.dataset.normalHeight):w;let T;switch(f){case"start":T=P-y+(l.Ni?1:0);break;case"end":T=P+b+y-N;break;case"nearest":case"center":case"centerOrTop":T=b<N?P+b/2-N/2:P-y}const x=function(e,t,n=s.nxZ,o){const{scrollTop:i}=e;if(void 0===o){const e=t-i;if(e<-n)return i+(e+n);if(e>n)return i+(e-n)}else{if(o===a.CC.Up)return t+n;if(o===a.CC.Down)return Math.max(0,t-n)}return i}(t,T,g,v);let M=T-x;if(M<0){const e=-x;M=Math.max(M,e)}else if(M>0){const e=R-(x+N);M=Math.min(M,e)}const k=Math.abs(M);return()=>{if(k<1)return void(I!==x&&(t.scrollTop=x));const e=x+M;if(0===E)return void(t.scrollTop=e);const n=k<=s.s8T?C:S,i=E||s.SKD+k/s.nxZ*(s.OzO-s.SKD),a=Date.now();p=!0;const c=m;m=(0,o.VK)(void 0,!0),c?.(),(0,u.S0)((()=>{const o=Math.min((Date.now()-a)/i,1),s=M*(1-n(o)),r=Math.round(e-s);return t.scrollTop=r,p=o<1&&r!==e,p||(h=void 0,m?.(),m=void 0),p}),r.RK)}}function v(){return p}function A(){m(),m=void 0}function C(e){return 1-(1-e)**3.5}function S(e){return 1-(1-e)**6}},58734:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(96454);function i(e,t,n){if(!t&&e===document.activeElement)return;const i=window.getSelection(),a=document.createRange(),s=e.lastChild||e;o.TF||n||s&&s.nodeValue?(a.selectNodeContents(n?e:s),a.collapse(!1),i.removeAllRanges(),i.addRange(a)):e.focus()}},81686:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(31481);const i=1;function a(){const e=window.getSelection();let t=e?.rangeCount?e.getRangeAt(0).cloneContents():void 0;const n=e?.focusNode&&e.focusOffset>0&&s(e.focusNode,o.zPk);if(!t||0===t.childElementCount)return;const a=Array.from(t.children).reduce(((e,t)=>t.nodeType===i&&t.classList.contains("message-date-group")?Array.from(t.querySelectorAll(".Message")).reduce(((e,t)=>e.concat(Number(t.dataset.messageId))),e):t.nodeType===i&&t.classList.contains("Message")?e.concat(Number(t.dataset.messageId)):e),[]);for(;t.firstChild;)t.removeChild(t.firstChild);return t=void 0,n||a.pop(),a}function s(e,t){return!(e.nodeType!==i||!e.classList.contains(t))||!!e.parentNode&&s(e.parentNode,t)}},58968:(e,t,n)=>{n.d(t,{I5:()=>s,LS:()=>a,V2:()=>i,lw:()=>o});const o={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},i=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],a=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],s={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},21013:(e,t,n)=>{n.d(t,{qh:()=>l,Ay:()=>u,g4:()=>h});var o=n(23174),i=n(31481);const a={"*":o.C7.Bold,_:o.C7.Italic,"~":o.C7.Strike,"`":o.C7.Code,"|":o.C7.Spoiler};function s(e){const t=new Map;for(const n of e)"entity"in n&&t.set(n.entity,(t.get(n.entity)??0)+1);return{map:t,get:e=>t.get(e)??0,dec(e,n=1){t.set(e,(t.get(e)??0)-n)},inc(e,n=1){t.set(e,(t.get(e)??0)+n)}}}function r(e){const t=e.trim();if(0===t.length)return;const n=e.indexOf("\n");let o,i=t;return-1!==n&&(o=e.slice(0,n).trim(),i=e.slice(n+1)),i=i.trim(),0===i.length?[void 0,t]:(0===o?.length&&(o=void 0),[o,i])}const c=[o.C7.Bold,o.C7.Italic,o.C7.Strike,o.C7.Spoiler];const l={B:o.C7.Bold,STRONG:o.C7.Bold,I:o.C7.Italic,EM:o.C7.Italic,INS:o.C7.Underline,U:o.C7.Underline,S:o.C7.Strike,STRIKE:o.C7.Strike,DEL:o.C7.Strike,CODE:o.C7.Code,PRE:o.C7.Pre,BLOCKQUOTE:o.C7.Blockquote},d=5;function u(e,t=!1,n=!1){const u=document.createElement("div");u.innerHTML=t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${i.kNZ}+?)\\)`,"g"),((e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`))}(e):e,u.querySelectorAll("br").forEach((e=>{e.replaceWith("\n")}));let m=u.querySelector("div");for(;m;)m.replaceWith("\n",...m.childNodes),m=u.querySelector("div");h(u);const p=u.innerText.trim().replace(/\u200b+/g,"");let f=-u.innerText.indexOf(p[0]),y=0;const g=[];function v(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const i=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(l[e.nodeName])return l[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===o.C7.MentionName?o.C7.MentionName:t.dataset.entityType===o.C7.Url?o.C7.Url:t.href.startsWith("mailto:")?o.C7.Email:t.href.startsWith("tel:")?o.C7.Phone:t.href!==t.textContent?o.C7.TextUrl:o.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?o.C7.CustomEmoji:void 0}(e);if(!i||!e.textContent)return{index:n,entity:void 0};const a=t.indexOf(e.textContent,n),s=a>=0?a:n,r=t.substring(0,s).length,{length:c}=t.substring(s,s+e.textContent.length);if(i===o.C7.TextUrl)return{index:s,entity:{type:i,offset:r,length:c,url:e.href}};if(i===o.C7.MentionName)return{index:s,entity:{type:i,offset:r,length:c,userId:e.dataset.userId}};if(i===o.C7.Pre)return{index:s,entity:{type:i,offset:r,length:c,language:e.dataset.language}};if(i===o.C7.CustomEmoji)return{index:s,entity:{type:i,offset:r,length:c,documentId:e.dataset.documentId}};if(i===o.C7.Timestamp){const t=Number(e.dataset.timestamp);return Number.isNaN(t)?{index:s,entity:void 0}:{index:s,entity:{type:i,offset:r,length:c,timestamp:t}}}return{index:s,entity:{type:i,offset:r,length:c}}}(e,p,f);if(n)f=t,g.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;f+=e.textContent.length}e.hasChildNodes()&&y<=d&&(y+=1,Array.from(e.childNodes).forEach(v))}Array.from(u.childNodes).forEach((e=>{y=1,v(e)}));let A={text:p,entities:g};return n||(A=function(e,t=[]){let n=function(e){const t=[];let n="";const i=()=>{n.length&&t.push({type:"text",str:n}),n=""};for(let s=0;s<e.length;s++){const r=e[s],c=e[s+1]??"",l=e[s+2]??"",d=a[r];d===o.C7.Code?(i(),"`"===c&&"`"===l?(t.push({type:"entity",entity:o.C7.Pre,str:"```"}),s+=2):t.push({type:"entity",entity:o.C7.Code,str:"`"})):d&&c===r?(i(),t.push({type:"entity",entity:d,str:r+c}),s++):n+=r}return i(),t}(e);n=function(e){const t=[],n=s(e);let i,a="";for(const s of e)if("entity"===s.type){let e=!1;if(void 0===i)s.entity===o.C7.Pre||s.entity===o.C7.Code?n.get(s.entity)>=2?(i=s.entity,n.dec(s.entity),t.push(s)):t.push({type:"text",str:s.str}):t.push(s);else if(i===s.entity){if(n.dec(s.entity),i===o.C7.Pre){const e=r(a);if(e){const n=a.length-e[1].length;t.push({type:"text",str:e[1]}),t.push({...s,entity:o.C7.Pre,lang:e[0],trimmedCnt:n})}else t.pop(),t.push({type:"text",str:`\`\`\`${a}\`\`\``})}else t.push({type:"text",str:a}),t.push(s);i=void 0,a=""}else e=!0;e&&(n.dec(s.entity),a+=s.str)}else void 0===i?t.push(s):a+=s.str;return t}(n);let[i,l]=function(e){const t=s(e),n=new Map;let i="";const a=[],r=[];for(const s of e)if("entity"===s.type)if(n.has(s.entity)){const e=n.get(s.entity),c={type:s.entity,offset:e,length:i.length-e};c.type===o.C7.Pre&&s.entity===o.C7.Pre&&(c.language=s.lang,r.push({pos:i.length,consumed:s.trimmedCnt??0})),a.push(c),r.push({pos:i.length,consumed:s.str.length}),t.dec(s.entity),n.delete(s.entity)}else t.get(s.entity)>=2?(r.push({pos:i.length,consumed:s.str.length}),t.dec(s.entity),n.set(s.entity,i.length)):i+=s.str;else i+=s.str;return[{text:i,entities:a},r]}(n);return i=function(e,t,n){if(0===n.length)return e;t=t.sort(((e,t)=>e.pos-t.pos)),n=n.sort(((e,t)=>e.offset-t.offset));for(const o of n){let n=o.offset,i=o.offset+o.length;for(let e=0;e<t.length;e++)n>=t[e].pos&&(n-=Math.min(t[e].consumed,n-t[e].pos)),i>=t[e].pos&&(i-=Math.min(t[e].consumed,i-t[e].pos));e.entities?.push({...o,offset:n,length:i-n})}return e}(i,l,t),i=function(e){let t=e.text;const n=e.entities??[],o=t.length;t=t.trimStart();const i=o-t.length;if(t=t.trimEnd(),o!==t.length)for(const e of n)e.offset<i?(e.length=e.offset+e.length-i,e.offset=0):e.offset-=i,e.length+e.offset>t.length&&(e.length=t.length-e.offset);return{text:t,entities:n}}(i),i=function(e){const t=e.entities??[];let n=[];const o=new Map;for(const e of t){const t=e.offset,i=e.offset+e.length,a=o.get(t)??[],s=o.get(i)??[],r=e.type;c.includes(r)?(a.push({action:"start",type:r}),s.push({action:"end",type:r})):n.push(e),o.set(t,a),o.set(i,s)}let i=[...o.entries()];i=i.sort(((e,t)=>e[0]-t[0]));const a=new Map;let s=[];for(const[e,t]of i){for(const t of s)t.length=e-t.offset,n.push(t);s=[];for(const e of t){const t=a.get(e.type)??0;"start"===e.action?a.set(e.type,t+1):a.set(e.type,t-1)}for(const[t,n]of a.entries())n>0&&s.push({type:t,offset:e,length:0})}return n=n.sort(((e,t)=>e.offset===t.offset?t.length-e.length:e.offset-t.offset)),{text:e.text,entities:n}}(i),i}(p,g)),0===A.entities?.length&&(A.entities=void 0),A}function h(e){e.querySelectorAll("img").forEach((e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")}))}},73104:(e,t,n)=>{let o,i;n.d(t,{M6:()=>c,v5:()=>l});const a={Down:!0,ArrowDown:!0,Up:!0,ArrowUp:!0,Left:!0,ArrowLeft:!0,Right:!0,ArrowRight:!0," ":!0,PageUp:!0,PageDown:!0,End:!0,Home:!0,Tab:!0},s=e=>{const t="deltaY"in e?e.deltaY:(e=>"changedTouches"in e?e.changedTouches[0].clientY:0)(e);if(!o||!o.contains(e.target)||o.scrollTop<=0&&t<=0||o.scrollTop>=o.scrollHeight-o.offsetHeight&&t>=0){if(i&&e.target.closest(i))return;e.preventDefault()}};function r(e){a[e.key]&&!function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=e,n=t.tagName.toLowerCase();if("textarea"===n)return!0;if("input"!==n)return!1;const o=t.getAttribute("type");return!!o&&["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(o.toLowerCase())>-1}(e.target)&&e.preventDefault()}function c(e,t){return o=e,i=t,document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.onkeydown=r,l}function l(){o=void 0,i=void 0,document.removeEventListener("wheel",s),document.removeEventListener("touchmove",s),document.onkeydown=null}},16460:(e,t,n)=>{function o(e,t){let n=0,o=0,i=e;for(;i&&i!==t&&!i.contains(t);)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;return{top:n,left:o}}n.d(t,{A:()=>o})},41512:(e,t,n)=>{n.d(t,{Y:()=>i});var o=n(43503);function i(e){if("none"===e.style.display)return!1;const t=e.getBoundingClientRect(),{height:n}=o.A.get();return t.top<=n&&t.top+t.height>=0}},31722:(e,t,n)=>{n.d(t,{A:()=>o});const o={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},93879:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},69988:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8",outside:"Hqw10FGl","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}}}]);
//# sourceMappingURL=1170.379b0fb44abf1108a0a3.js.map